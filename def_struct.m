c_scale=1;
thruster_data = struct('label',{1,2,3,4,5,6,7,8}, ...
                        'type',{3,3,3,4,3,3,3,3}, ...4%tunnel
                        'enable',{1,1,1,1,0,0,0,0}, ...
                        'constr',1, ... %if constraint(phi_min and phi_max) is active 
                        'dt',0.05, ...
                        'x0',0, ...
                        'y0',0, ...
                        'x',{-24.5,-24.5,20.6,22.6,-30,30,5,5}, ...
                        'y',{-3,3,0,0,0,0,-12,12}, ...
                        'T',{1160,1160,1110,0,1000,1000,1000,1000}, ...
                        'T_reserve',{1160,1160,1110,0,1000,1000,1000,1000}, ...
                        'phi',{0,0,0,1.571,0,0,0,0}, ...
                        'phi_reserve',{0,0,0,1.571,0,0,0,0}, ...
                        'Tmax',{129800,129800,81200,53400,0,0,0,0}, ...
                        'Tmin',{1160*1,1160*1,1110*1,-53400,0,0,0,0}, ...
                        'base',{[1160*2 1.07190957346364],[1160*2 -1.07190957346364],[1110*2 pi],[0 0],[0 0],[0 0],[0 0],[0 0]}, ... %base T and phi
                        'dTmax',{6490,6490,4060,2670,0,0,0,0}, ...
                        'dphi_max',{0.09,0.09,0.08726,0.09,0,0,0,0}, ...
                        'Tplus',0, ...
                        'T_',0, ...
                        'phiPlus',0, ...
                        'phi_',0, ...
                        'phi_min',{-1.04,2.09,0,1.571,0.2,-0.69,-2.4,0.35}, ...
                        'phi_max',{-2.09,1.04,0,1.571,0.1,0.69,2.4,0.05}, ...
                        'weight',{[100 100],[100 100],[100 100],[10000 10000],[100 100],[100 100],[100 100],[100 100]},...
                        'weight_s',[1e8 1e8 1e8]'*1e0);
thruster_data0 = struct('label',0, ...
                        'type',3, ...4%tunnel
                        'enable',0, ...
                        'constr',1, ... %if constraint(phi_min and phi_max) is active 
                        'dt',0.05, ...
                        'x0',0, ...
                        'y0',0, ...
                        'x',0, ...
                        'y',0, ...
                        'T',0, ...
                        'T_reserve',0, ...
                        'phi',0, ...
                        'phi_reserve',0, ...
                        'Tmax',0, ...
                        'Tmin',0, ...
                        'base',[1160 1.04], ... %base T and phi
                        'dTmax',0, ...
                        'dphi_max',0, ...
                        'Tplus',0, ...
                        'T_',0, ...
                        'phiPlus',0, ...
                        'phi_',0, ...
                        'phi_min',0, ...
                        'phi_max',0, ...
                        'weight',[100 100],...
                        'weight_s',[1000000 1000000 100000000]'*1e0);
             
T_r = struct('Tx',10000,'Ty',0,'Tm',1000);
N_enabled_thruster = 8;
alloc_out = struct ('label',{1,2,3,4,5,6,7,8}, ...
                    'enable',{1,1,1,1,1,1,1,1}, ...
                    'TSP',0, ...
                    'ASP',0, ...
                    'Tx',0, ...
                    'Ty',0, ...
                    'T',0, ...
                    'phi',0, ...
                    'Tm',0);

rudder_table = [0 98 0
                5 96.5 8
                10 95.6 16.3
                15 92 20
                20 89.5 28.7
                25 84 30
                30 81.1 34.1
                35 77 34.5
                40 74.3 34.7];
%------------------extend table
% temp = flipud(rudder_table);
% temp(:,1) = -temp(:,1);
% temp(:,3) = -temp(:,3);
% rudder_table = [temp;rudder_table];
%-----------------------------
rudder_table(:,1) = rudder_table(:,1) / 180 * pi;%angle of rudder
rudder_table(:,2:3) = rudder_table(:,2:3) / 100;
             
phi_f=atan2(rudder_table(:,3),rudder_table(:,2));%angle of Fx Fy
rudder_table(:,end+1)=phi_f;
rudder_table(:,end+1)=sqrt(rudder_table(:,2).^2 + rudder_table(:,3).^2);
rudder_table = rudder_table';
% Rangle = rudder_table(:,1);
% Fangle=rudder_table(:,4);
% T = rudder_table(:,5);
% x=rudder_table(:,2);
% y=rudder_table(:,3);