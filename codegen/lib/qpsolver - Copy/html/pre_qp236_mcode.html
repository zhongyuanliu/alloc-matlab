<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="81,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T4U3">thruster_data</span>,<span class="var type1" id="S3T3U4">Nvar</span>,<span class="var type1" id="S4T18U5">H</span>,<span class="var type1" id="S5T1U6">f</span>,<span class="var type1" id="S6T18U7">A</span>,<span class="var type1" id="S7T1U8">b</span>,<span class="var type1" id="S8T18U9">Aeq</span>,<span class="var type1" id="S9T1U10">beq</span>,<span class="var type1" id="S10T1U11">x0</span>] = pre_qp(<span class="var type1" id="S2T4U14">thruster_data</span>,<span class="var type1" id="S11T7U15">T_r</span>,<span class="var type1" id="S12T3U16">N_enabled_thruster</span>,<span class="var type2" id="S13T3V1U17">NA_fpp</span>,<span class="var type1" id="S14T9U18">rudder_table</span>,<span class="var type1" id="S15T10U19">Rangle_T</span>,<span class="var type1" id="S16T10U20">Rangle_Fangle</span>,<span class="var type1" id="S17T3U21">no_azi_angle_constr</span>,<span class="var type1" id="S18T3U22">method</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="81,2" id="srcline2">  2</a></span><span class="line"><span class="comment">%% ---------------precalculation------------------</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,3" id="srcline3">  3</a></span><span class="line"><span class="mxinfo " id="T3:U19"><span class="var type1" id="S19T3U25">glob_opt</span> = <span class="mxinfo " id="T3:U21">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,4" id="srcline4">  4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,5" id="srcline5">  5</a></span><span class="line"><span class="mxinfo " id="T3:U22"><span class="var type1" id="S20T3U29">Ntunnel</span>=<span class="mxinfo " id="T3:U24">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,6" id="srcline6">  6</a></span><span class="line"><span class="mxinfo " id="T3:U25"><span class="var type1" id="S21T3U33">Nazi</span>=<span class="mxinfo " id="T3:U27">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,7" id="srcline7">  7</a></span><span class="line"><span class="mxinfo " id="T3:U28"><span class="var type1" id="S22T3U37">Nfpp</span>=<span class="mxinfo " id="T3:U30">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,8" id="srcline8">  8</a></span><span class="line"><span class="mxinfo " id="T3:U31"><span class="var type1" id="S23T3U41">dt</span> = <span class="mxinfo " id="T3:U33"><span class="mxinfo " id="T25:U34"><span class="var type1" id="S2T4U44">thruster_data</span>(<span class="mxinfo " id="T3:U36">1</span>)</span>.dt</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,9" id="srcline9">  9</a></span><span class="line"><span class="mxinfo " id="T3:U37"><span class="var type1" id="S24T3U49">c2</span> = <span class="mxinfo " id="T3:U39"><span class="mxinfo " id="T3:U40">0.001</span>*<span class="mxinfo " id="T3:U41">0</span></span></span>;<span class="comment">%!!!!!!!!!!!!!!!!!!!!!!!!!!</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,10" id="srcline10"> 10</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,11" id="srcline11"> 11</a></span><span class="line"><span class="mxinfo " id="T3:U42"><span class="var type1" id="S25T3U55">error_linearization</span> = <span class="mxinfo " id="T3:U44">0.01</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,12" id="srcline12"> 12</a></span><span class="line"><span class="mxinfo " id="T82:U45">[<span class="var type1" id="S26T82U60">A_azi</span>,<span class="var type1" id="S27T3U61">NA_azi</span>] = <span class="fcn" id="F237N13:B63">N_sided_linear</span>(<span class="var type1" id="S25T3U64">error_linearization</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,13" id="srcline13"> 13</a></span><span class="line"><span class="comment">% NA_azi = 0;%not used at the moment!!!!!!!!!!!!!!!!</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,14" id="srcline14"> 14</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,15" id="srcline15"> 15</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,16" id="srcline16"> 16</a></span><span class="line"><span class="mxinfo " id="T1:U49"><span class="var type1" id="S10T1U67">x0</span>=<span class="mxinfo " id="T1:U51">zeros(<span class="mxinfo " id="T3:U52"><span class="mxinfo " id="T3:U53"><span class="var type1" id="S12T3U72">N_enabled_thruster</span> * <span class="mxinfo " id="T3:U55">2</span></span> + <span class="mxinfo " id="T3:U56">3</span></span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,17" id="srcline17"> 17</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,18" id="srcline18"> 18</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S30T3U78">j</span>=<span class="mxinfo " id="T1:U58"><span class="mxinfo " id="T3:U59">1</span>:<span class="var type1" id="S12T3U81">N_enabled_thruster</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,19" id="srcline19"> 19</a></span><span class="line">    <span class="mxinfo " id="T3:U61"><span class="mxinfo " id="T3:U62"><span class="var type1" id="S10T1U85">x0</span>(<span class="mxinfo " id="T3:U64"><span class="mxinfo " id="T3:U65"><span class="mxinfo " id="T3:U66">2</span> * <span class="var type1" id="S30T3U89">j</span></span> - <span class="mxinfo " id="T3:U68">1</span></span>)</span>=<span class="mxinfo " id="T3:U69"><span class="mxinfo " id="T3:U70"><span class="mxinfo " id="T25:U71"><span class="var type1" id="S2T4U94">thruster_data</span>(<span class="var type1" id="S30T3U95">j</span>)</span>.T</span>*<span class="mxinfo " id="T3:U74">cos(<span class="mxinfo " id="T3:U75"><span class="mxinfo " id="T25:U76"><span class="var type1" id="S2T4U101">thruster_data</span>(<span class="var type1" id="S30T3U102">j</span>)</span>.phi</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,20" id="srcline20"> 20</a></span><span class="line">    <span class="mxinfo " id="T3:U79"><span class="mxinfo " id="T3:U80"><span class="var type1" id="S10T1U107">x0</span>(<span class="mxinfo " id="T3:U82"><span class="mxinfo " id="T3:U83">2</span> * <span class="var type1" id="S30T3U110">j</span></span>)</span>=<span class="mxinfo " id="T3:U85"><span class="mxinfo " id="T3:U86"><span class="mxinfo " id="T25:U87"><span class="var type1" id="S2T4U114">thruster_data</span>(<span class="var type1" id="S30T3U115">j</span>)</span>.T</span>*<span class="mxinfo " id="T3:U90">sin(<span class="mxinfo " id="T3:U91"><span class="mxinfo " id="T25:U92"><span class="var type1" id="S2T4U121">thruster_data</span>(<span class="var type1" id="S30T3U122">j</span>)</span>.phi</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,21" id="srcline21"> 21</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="81,22" id="srcline22"> 22</a></span><span class="line">    <span class="keyword">switch</span> <span class="mxinfo " id="T3:U95"><span class="mxinfo " id="T25:U96"><span class="var type1" id="S2T4U127">thruster_data</span>(<span class="var type1" id="S30T3U128">j</span>)</span>.type</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,23" id="srcline23"> 23</a></span><span class="line">        <span class="keyword">case</span> <span class="mxinfo " id="T3:U99">4</span><span class="comment">%tunnel</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,24" id="srcline24"> 24</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,25" id="srcline25"> 25</a></span><span class="line">            <span class="mxinfo " id="T3:U100"><span class="mxinfo " id="T3:U101"><span class="mxinfo " id="T25:U102"><span class="var type1" id="S2T4U136">thruster_data</span>(<span class="var type1" id="S30T3U137">j</span>)</span>.Tplus</span> = <span class="mxinfo " id="T3:U105">min(<span class="mxinfo " id="T3:U106"><span class="mxinfo " id="T3:U107"><span class="mxinfo " id="T25:U108"><span class="var type1" id="S2T4U144">thruster_data</span>(<span class="var type1" id="S30T3U145">j</span>)</span>.T</span> + <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,26" id="srcline26"> 26</a></span><span class="line">                <span class="mxinfo " id="T3:U111"><span class="var type1" id="S23T3U148">dt</span> * <span class="mxinfo " id="T3:U113"><span class="mxinfo " id="T25:U114"><span class="var type1" id="S2T4U151">thruster_data</span>(<span class="var type1" id="S30T3U152">j</span>)</span>.dTmax</span></span></span>, <span class="mxinfo " id="T3:U117"><span class="mxinfo " id="T25:U118"><span class="var type1" id="S2T4U156">thruster_data</span>(<span class="var type1" id="S30T3U157">j</span>)</span>.Tmax</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,27" id="srcline27"> 27</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,28" id="srcline28"> 28</a></span><span class="line">            <span class="mxinfo " id="T3:U121"><span class="mxinfo " id="T3:U122"><span class="mxinfo " id="T25:U123"><span class="var type1" id="S2T4U163">thruster_data</span>(<span class="var type1" id="S30T3U164">j</span>)</span>.T_</span> = <span class="mxinfo " id="T3:U126">max(<span class="mxinfo " id="T3:U127"><span class="mxinfo " id="T3:U128"><span class="mxinfo " id="T25:U129"><span class="var type1" id="S2T4U171">thruster_data</span>(<span class="var type1" id="S30T3U172">j</span>)</span>.T</span> - <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,29" id="srcline29"> 29</a></span><span class="line">                <span class="mxinfo " id="T3:U132"><span class="var type1" id="S23T3U175">dt</span> * <span class="mxinfo " id="T3:U134"><span class="mxinfo " id="T25:U135"><span class="var type1" id="S2T4U178">thruster_data</span>(<span class="var type1" id="S30T3U179">j</span>)</span>.dTmax</span></span></span>, <span class="mxinfo " id="T3:U138"><span class="mxinfo " id="T25:U139"><span class="var type1" id="S2T4U183">thruster_data</span>(<span class="var type1" id="S30T3U184">j</span>)</span>.Tmin</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,30" id="srcline30"> 30</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,31" id="srcline31"> 31</a></span><span class="line">            <span class="mxinfo " id="T3:U142"><span class="var type1" id="S20T3U188">Ntunnel</span> = <span class="mxinfo " id="T3:U144"><span class="var type1" id="S20T3U190">Ntunnel</span> + <span class="mxinfo " id="T3:U146">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,32" id="srcline32"> 32</a></span><span class="line">        <span class="keyword">case</span> <span class="mxinfo " id="T3:U147">3</span><span class="comment">%azi</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,33" id="srcline33"> 33</a></span><span class="line">            <span class="mxinfo " id="T3:U148"><span class="mxinfo " id="T3:U149"><span class="mxinfo " id="T25:U150"><span class="var type1" id="S2T4U198">thruster_data</span>(<span class="var type1" id="S30T3U199">j</span>)</span>.Tplus</span> = <span class="mxinfo " id="T3:U153">min(<span class="mxinfo " id="T3:U154"><span class="mxinfo " id="T3:U155"><span class="mxinfo " id="T25:U156"><span class="var type1" id="S2T4U206">thruster_data</span>(<span class="var type1" id="S30T3U207">j</span>)</span>.T</span> + <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,34" id="srcline34"> 34</a></span><span class="line">                <span class="mxinfo " id="T3:U159"><span class="var type1" id="S23T3U210">dt</span> * <span class="mxinfo " id="T3:U161"><span class="mxinfo " id="T25:U162"><span class="var type1" id="S2T4U213">thruster_data</span>(<span class="var type1" id="S30T3U214">j</span>)</span>.dTmax</span></span></span>, <span class="mxinfo " id="T3:U165"><span class="mxinfo " id="T25:U166"><span class="var type1" id="S2T4U218">thruster_data</span>(<span class="var type1" id="S30T3U219">j</span>)</span>.Tmax</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,35" id="srcline35"> 35</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,36" id="srcline36"> 36</a></span><span class="line">            <span class="mxinfo " id="T3:U169"><span class="mxinfo " id="T3:U170"><span class="mxinfo " id="T25:U171"><span class="var type1" id="S2T4U225">thruster_data</span>(<span class="var type1" id="S30T3U226">j</span>)</span>.T_</span> = <span class="mxinfo " id="T3:U174">max(<span class="mxinfo " id="T3:U175"><span class="mxinfo " id="T3:U176"><span class="mxinfo " id="T25:U177"><span class="var type1" id="S2T4U233">thruster_data</span>(<span class="var type1" id="S30T3U234">j</span>)</span>.T</span> - <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,37" id="srcline37"> 37</a></span><span class="line">                <span class="mxinfo " id="T3:U180"><span class="var type1" id="S23T3U237">dt</span> * <span class="mxinfo " id="T3:U182"><span class="mxinfo " id="T25:U183"><span class="var type1" id="S2T4U240">thruster_data</span>(<span class="var type1" id="S30T3U241">j</span>)</span>.dTmax</span></span></span>, <span class="mxinfo " id="T3:U186"><span class="mxinfo " id="T25:U187"><span class="var type1" id="S2T4U245">thruster_data</span>(<span class="var type1" id="S30T3U246">j</span>)</span>.Tmin</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,38" id="srcline38"> 38</a></span><span class="line">            <span class="keyword">if</span> <span class="mxinfo " id="T11:U190"><span class="mxinfo " id="T3:U191"><span class="mxinfo " id="T25:U192"><span class="var type1" id="S2T4U254">thruster_data</span>(<span class="var type1" id="S30T3U255">j</span>)</span>.constr_angle</span> == <span class="mxinfo " id="T3:U195">1</span></span> <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,39" id="srcline39"> 39</a></span><span class="line">               &amp;&amp; <span class="mxinfo " id="T11:U196"><span class="mxinfo " id="T3:U197">abs(<span class="mxinfo " id="T3:U198"><span class="mxinfo " id="T3:U199"><span class="mxinfo " id="T25:U200"><span class="var type1" id="S2T4U264">thruster_data</span>(<span class="var type1" id="S30T3U265">j</span>)</span>.phi_max</span> - <span class="mxinfo " id="T3:U203"><span class="mxinfo " id="T25:U204"><span class="var type1" id="S2T4U269">thruster_data</span>(<span class="var type1" id="S30T3U270">j</span>)</span>.phi_min</span></span>)</span>&gt; <span class="mxinfo " id="T3:U207">1e-8</span></span> <span class="comment">%phi_min == phi_max means no angle constraint</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,40" id="srcline40"> 40</a></span><span class="line">            [<span class="mxinfo " id="T3:U208"><span class="mxinfo " id="T25:U209"><span class="var type1" id="S2T4U278">thruster_data</span>(<span class="var type1" id="S30T3U279">j</span>)</span>.phi_</span>,<span class="mxinfo " id="T3:U212"><span class="mxinfo " id="T25:U213"><span class="var type1" id="S2T4U283">thruster_data</span>(<span class="var type1" id="S30T3U284">j</span>)</span>.phiPlus</span>]= <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,41" id="srcline41"> 41</a></span><span class="line">                <span class="fcn" id="F257N15:B287">angleMaxMin</span>(<span class="mxinfo " id="T3:U216"><span class="mxinfo " id="T25:U217"><span class="var type1" id="S2T4U290">thruster_data</span>(<span class="var type1" id="S30T3U291">j</span>)</span>.phi_min</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,42" id="srcline42"> 42</a></span><span class="line">                <span class="mxinfo " id="T3:U220"><span class="mxinfo " id="T25:U221"><span class="var type1" id="S2T4U295">thruster_data</span>(<span class="var type1" id="S30T3U296">j</span>)</span>.phi_max</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,43" id="srcline43"> 43</a></span><span class="line">                <span class="mxinfo " id="T3:U224"><span class="mxinfo " id="T25:U225"><span class="var type1" id="S2T4U300">thruster_data</span>(<span class="var type1" id="S30T3U301">j</span>)</span>.phi</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,44" id="srcline44"> 44</a></span><span class="line">                <span class="mxinfo " id="T3:U228"><span class="mxinfo " id="T3:U229"><span class="mxinfo " id="T25:U230"><span class="var type1" id="S2T4U306">thruster_data</span>(<span class="var type1" id="S30T3U307">j</span>)</span>.phi</span> - <span class="mxinfo " id="T3:U233"><span class="var type1" id="S23T3U310">dt</span> * <span class="mxinfo " id="T3:U235"><span class="mxinfo " id="T25:U236"><span class="var type1" id="S2T4U313">thruster_data</span>(<span class="var type1" id="S30T3U314">j</span>)</span>.dphi_max</span></span></span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,45" id="srcline45"> 45</a></span><span class="line">                <span class="mxinfo " id="T3:U239"><span class="mxinfo " id="T3:U240"><span class="mxinfo " id="T25:U241"><span class="var type1" id="S2T4U319">thruster_data</span>(<span class="var type1" id="S30T3U320">j</span>)</span>.phi</span> + <span class="mxinfo " id="T3:U244"><span class="var type1" id="S23T3U323">dt</span> * <span class="mxinfo " id="T3:U246"><span class="mxinfo " id="T25:U247"><span class="var type1" id="S2T4U326">thruster_data</span>(<span class="var type1" id="S30T3U327">j</span>)</span>.dphi_max</span></span></span>);</span></span>
<span class="srcline"><span class="lineno"><a href="81,46" id="srcline46"> 46</a></span><span class="line">            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,47" id="srcline47"> 47</a></span><span class="line">                <span class="mxinfo " id="T3:U250"><span class="mxinfo " id="T3:U251"><span class="mxinfo " id="T25:U252"><span class="var type1" id="S2T4U334">thruster_data</span>(<span class="var type1" id="S30T3U335">j</span>)</span>.phi_</span> = <span class="mxinfo " id="T3:U255"><span class="mxinfo " id="T3:U256"><span class="mxinfo " id="T25:U257"><span class="var type1" id="S2T4U340">thruster_data</span>(<span class="var type1" id="S30T3U341">j</span>)</span>.phi</span> - <span class="mxinfo " id="T3:U260"><span class="var type1" id="S23T3U344">dt</span> * <span class="mxinfo " id="T3:U262"><span class="mxinfo " id="T25:U263"><span class="var type1" id="S2T4U347">thruster_data</span>(<span class="var type1" id="S30T3U348">j</span>)</span>.dphi_max</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,48" id="srcline48"> 48</a></span><span class="line">                <span class="mxinfo " id="T3:U266"><span class="mxinfo " id="T3:U267"><span class="mxinfo " id="T25:U268"><span class="var type1" id="S2T4U354">thruster_data</span>(<span class="var type1" id="S30T3U355">j</span>)</span>.phiPlus</span> = <span class="mxinfo " id="T3:U271"><span class="mxinfo " id="T3:U272"><span class="mxinfo " id="T25:U273"><span class="var type1" id="S2T4U360">thruster_data</span>(<span class="var type1" id="S30T3U361">j</span>)</span>.phi</span> + <span class="mxinfo " id="T3:U276"><span class="var type1" id="S23T3U364">dt</span> * <span class="mxinfo " id="T3:U278"><span class="mxinfo " id="T25:U279"><span class="var type1" id="S2T4U367">thruster_data</span>(<span class="var type1" id="S30T3U368">j</span>)</span>.dphi_max</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,49" id="srcline49"> 49</a></span><span class="line"><span class="comment">%                 thruster_data(j).constr_angle = 1;</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,50" id="srcline50"> 50</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,51" id="srcline51"> 51</a></span><span class="line">            <span class="comment">%             thruster_data(j).phiPlus = min(thruster_data(j).phi + <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,52" id="srcline52"> 52</a></span><span class="line">            <span class="comment">%                 dt * thruster_data(j).dphi_max, thruster_data(j).phi_max);</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,53" id="srcline53"> 53</a></span><span class="line">            <span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,54" id="srcline54"> 54</a></span><span class="line">            <span class="comment">%             thruster_data(j).phi_ = max(thruster_data(j).phi - <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,55" id="srcline55"> 55</a></span><span class="line">            <span class="comment">%                 dt * thruster_data(j).dphi_max, thruster_data(j).phi_min);</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,56" id="srcline56"> 56</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,57" id="srcline57"> 57</a></span><span class="line">            <span class="mxinfo " id="T3:U282"><span class="var type1" id="S21T3U372">Nazi</span> = <span class="mxinfo " id="T3:U284"><span class="var type1" id="S21T3U374">Nazi</span> + <span class="mxinfo " id="T3:U286">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,58" id="srcline58"> 58</a></span><span class="line">        <span class="keyword">case</span> <span class="mxinfo " id="T3:U287">2</span><span class="comment">%fpp</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,59" id="srcline59"> 59</a></span><span class="line">            <span class="mxinfo " id="T3:U288"><span class="mxinfo " id="T3:U289"><span class="mxinfo " id="T25:U290"><span class="var type1" id="S2T4U382">thruster_data</span>(<span class="var type1" id="S30T3U383">j</span>)</span>.Tplus</span> = <span class="mxinfo " id="T3:U293"><span class="mxinfo " id="T3:U294">min((<span class="mxinfo " id="T3:U295"><span class="mxinfo " id="T3:U296"><span class="mxinfo " id="T25:U297"><span class="var type1" id="S2T4U392">thruster_data</span>(<span class="var type1" id="S30T3U393">j</span>)</span>.T</span> + <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,60" id="srcline60"> 60</a></span><span class="line">                <span class="mxinfo " id="T3:U300"><span class="var type1" id="S23T3U396">dt</span> * <span class="mxinfo " id="T3:U302"><span class="mxinfo " id="T25:U303"><span class="var type1" id="S2T4U399">thruster_data</span>(<span class="var type1" id="S30T3U400">j</span>)</span>.dTmax</span></span></span>) , <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,61" id="srcline61"> 61</a></span><span class="line">                <span class="mxinfo " id="T3:U306"><span class="mxinfo " id="T25:U307"><span class="var type1" id="S2T4U404">thruster_data</span>(<span class="var type1" id="S30T3U405">j</span>)</span>.Tmax</span>)</span> * <span class="mxinfo " id="T3:U310">polyval(<span class="var type1" id="S15T10U409">Rangle_T</span>,<span class="mxinfo " id="T3:U312">abs(<span class="mxinfo " id="T3:U313"><span class="mxinfo " id="T25:U314"><span class="var type1" id="S2T4U414">thruster_data</span>(<span class="var type1" id="S30T3U415">j</span>)</span>.phi</span>)</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,62" id="srcline62"> 62</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,63" id="srcline63"> 63</a></span><span class="line">            <span class="mxinfo " id="T3:U317"><span class="mxinfo " id="T3:U318"><span class="mxinfo " id="T25:U319"><span class="var type1" id="S2T4U421">thruster_data</span>(<span class="var type1" id="S30T3U422">j</span>)</span>.T_</span> = <span class="mxinfo " id="T3:U322"><span class="mxinfo " id="T3:U323">max(<span class="mxinfo " id="T3:U324"><span class="mxinfo " id="T3:U325"><span class="mxinfo " id="T25:U326"><span class="var type1" id="S2T4U430">thruster_data</span>(<span class="var type1" id="S30T3U431">j</span>)</span>.T</span> - <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,64" id="srcline64"> 64</a></span><span class="line">                <span class="mxinfo " id="T3:U329"><span class="var type1" id="S23T3U434">dt</span> * <span class="mxinfo " id="T3:U331"><span class="mxinfo " id="T25:U332"><span class="var type1" id="S2T4U437">thruster_data</span>(<span class="var type1" id="S30T3U438">j</span>)</span>.dTmax</span></span></span>, <span class="mxinfo " id="T3:U335"><span class="mxinfo " id="T25:U336"><span class="var type1" id="S2T4U442">thruster_data</span>(<span class="var type1" id="S30T3U443">j</span>)</span>.Tmin</span>)</span> <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,65" id="srcline65"> 65</a></span><span class="line">                * <span class="mxinfo " id="T3:U339">polyval(<span class="var type1" id="S15T10U447">Rangle_T</span>,<span class="mxinfo " id="T3:U341">abs(<span class="mxinfo " id="T3:U342"><span class="mxinfo " id="T25:U343"><span class="var type1" id="S2T4U452">thruster_data</span>(<span class="var type1" id="S30T3U453">j</span>)</span>.phi</span>)</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,66" id="srcline66"> 66</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,67" id="srcline67"> 67</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,68" id="srcline68"> 68</a></span><span class="line">            [<span class="var type1" id="S38T3U458">temp1</span>,<span class="var type1" id="S39T3U459">temp2</span>]= <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,69" id="srcline69"> 69</a></span><span class="line">                <span class="fcn" id="F257N15:B461">angleMaxMin</span>(<span class="mxinfo " id="T3:U348"><span class="mxinfo " id="T25:U349"><span class="var type1" id="S2T4U464">thruster_data</span>(<span class="var type1" id="S30T3U465">j</span>)</span>.phi_min</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,70" id="srcline70"> 70</a></span><span class="line">                <span class="mxinfo " id="T3:U352"><span class="mxinfo " id="T25:U353"><span class="var type1" id="S2T4U469">thruster_data</span>(<span class="var type1" id="S30T3U470">j</span>)</span>.phi_max</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,71" id="srcline71"> 71</a></span><span class="line">                <span class="mxinfo " id="T3:U356"><span class="mxinfo " id="T25:U357"><span class="var type1" id="S2T4U474">thruster_data</span>(<span class="var type1" id="S30T3U475">j</span>)</span>.phi</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,72" id="srcline72"> 72</a></span><span class="line">                <span class="mxinfo " id="T3:U360"><span class="mxinfo " id="T3:U361"><span class="mxinfo " id="T25:U362"><span class="var type1" id="S2T4U480">thruster_data</span>(<span class="var type1" id="S30T3U481">j</span>)</span>.phi</span> - <span class="mxinfo " id="T3:U365"><span class="var type1" id="S23T3U484">dt</span> * <span class="mxinfo " id="T3:U367"><span class="mxinfo " id="T25:U368"><span class="var type1" id="S2T4U487">thruster_data</span>(<span class="var type1" id="S30T3U488">j</span>)</span>.dphi_max</span></span></span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,73" id="srcline73"> 73</a></span><span class="line">                <span class="mxinfo " id="T3:U371"><span class="mxinfo " id="T3:U372"><span class="mxinfo " id="T25:U373"><span class="var type1" id="S2T4U493">thruster_data</span>(<span class="var type1" id="S30T3U494">j</span>)</span>.phi</span> + <span class="mxinfo " id="T3:U376"><span class="var type1" id="S23T3U497">dt</span> * <span class="mxinfo " id="T3:U378"><span class="mxinfo " id="T25:U379"><span class="var type1" id="S2T4U500">thruster_data</span>(<span class="var type1" id="S30T3U501">j</span>)</span>.dphi_max</span></span></span>);</span></span>
<span class="srcline"><span class="lineno"><a href="81,74" id="srcline74"> 74</a></span><span class="line">            <span class="mxinfo " id="T3:U382"><span class="mxinfo " id="T3:U383"><span class="mxinfo " id="T25:U384"><span class="var type1" id="S2T4U507">thruster_data</span>(<span class="var type1" id="S30T3U508">j</span>)</span>.phiPlus</span> = <span class="mxinfo " id="T3:U387"><span class="mxinfo " id="T3:U388">sign(<span class="var type1" id="S39T3U513">temp2</span>)</span> * <span class="mxinfo " id="T3:U390">polyval(<span class="var type1" id="S16T10U516">Rangle_Fangle</span>,<span class="mxinfo " id="T3:U392">abs(<span class="var type1" id="S39T3U519">temp2</span>)</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,75" id="srcline75"> 75</a></span><span class="line">            <span class="mxinfo " id="T3:U394"><span class="mxinfo " id="T3:U395"><span class="mxinfo " id="T25:U396"><span class="var type1" id="S2T4U524">thruster_data</span>(<span class="var type1" id="S30T3U525">j</span>)</span>.phi_</span> = <span class="mxinfo " id="T3:U399"><span class="mxinfo " id="T3:U400">sign(<span class="var type1" id="S38T3U530">temp1</span>)</span> * <span class="mxinfo " id="T3:U402">polyval(<span class="var type1" id="S16T10U533">Rangle_Fangle</span>,<span class="mxinfo " id="T3:U404">abs(<span class="var type1" id="S38T3U536">temp1</span>)</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,76" id="srcline76"> 76</a></span><span class="line">            <span class="comment">%             temp = (min(thruster_data(j).phi + <span class="keyword">...</span><span class="comment"> %force angle</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,77" id="srcline77"> 77</a></span><span class="line">            <span class="comment">%                 dt * thruster_data(j).dphi_max, thruster_data(j).phi_max));</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,78" id="srcline78"> 78</a></span><span class="line">            <span class="comment">%             thruster_data(j).phiPlus = sign(temp) * polyval(Rangle_Fangle,abs(temp));</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,79" id="srcline79"> 79</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,80" id="srcline80"> 80</a></span><span class="line">            <span class="comment">%             temp = (max(thruster_data(j).phi - <span class="keyword">...</span><span class="comment"> %force angle</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,81" id="srcline81"> 81</a></span><span class="line">            <span class="comment">%                 dt * thruster_data(j).dphi_max, thruster_data(j).phi_min));</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,82" id="srcline82"> 82</a></span><span class="line">            <span class="comment">%             thruster_data(j).phi_ = sign(temp) * polyval(Rangle_Fangle,abs(temp));</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,83" id="srcline83"> 83</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,84" id="srcline84"> 84</a></span><span class="line">            <span class="mxinfo " id="T3:U406"><span class="var type1" id="S22T3U539">Nfpp</span> = <span class="mxinfo " id="T3:U408"><span class="var type1" id="S22T3U541">Nfpp</span> + <span class="mxinfo " id="T3:U410">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,85" id="srcline85"> 85</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,86" id="srcline86"> 86</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,87" id="srcline87"> 87</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,88" id="srcline88"> 88</a></span><span class="line"><span class="comment">%!!!!!to be improved</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,89" id="srcline89"> 89</a></span><span class="line"><span class="keyword">if</span> <span class="var type1" id="S19T3U546">glob_opt</span> == 1</span></span>
<span class="srcline"><span class="lineno"><a href="81,90" id="srcline90"> 90</a></span><span class="line">    <span class="keyword">for</span> <span class="var type0" id="S30T0U550">j</span>=1:<span class="var type0" id="S12T0U553">N_enabled_thruster</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,91" id="srcline91"> 91</a></span><span class="line">        <span class="var type0" id="S2T0U558">thruster_data</span>(<span class="var type0" id="S30T0U559">j</span>).Tplus = <span class="var type0" id="S2T0U563">thruster_data</span>(<span class="var type0" id="S30T0U564">j</span>).Tmax;</span></span>
<span class="srcline"><span class="lineno"><a href="81,92" id="srcline92"> 92</a></span><span class="line">        <span class="var type0" id="S2T0U570">thruster_data</span>(<span class="var type0" id="S30T0U571">j</span>).T_ = <span class="var type0" id="S2T0U575">thruster_data</span>(<span class="var type0" id="S30T0U576">j</span>).Tmin;</span></span>
<span class="srcline"><span class="lineno"><a href="81,93" id="srcline93"> 93</a></span><span class="line">        <span class="var type0" id="S2T0U582">thruster_data</span>(<span class="var type0" id="S30T0U583">j</span>).phi_ = <span class="var type0" id="S2T0U587">thruster_data</span>(<span class="var type0" id="S30T0U588">j</span>).phi_min;<span class="comment">%not correct. if phi_max - phi_min &gt;pi, constraint falls</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,94" id="srcline94"> 94</a></span><span class="line">        <span class="var type0" id="S2T0U594">thruster_data</span>(<span class="var type0" id="S30T0U595">j</span>).phiPlus = <span class="var type0" id="S2T0U599">thruster_data</span>(<span class="var type0" id="S30T0U600">j</span>).phi_max;</span></span>
<span class="srcline"><span class="lineno"><a href="81,95" id="srcline95"> 95</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="81,96" id="srcline96"> 96</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,97" id="srcline97"> 97</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,98" id="srcline98"> 98</a></span><span class="line"><span class="comment">% chck_sol = [[thruster_data(:).phi_min]' [thruster_data(:).phi_]' [thruster_data.phi]' [thruster_data.phiPlus]' [thruster_data(:).phi_max]'];</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,99" id="srcline99"> 99</a></span><span class="line"><span class="comment">% check_angle(chck_sol(:,1),chck_sol(:,2),chck_sol(:,3),chck_sol(:,4),chck_sol(:,5))</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,100" id="srcline100">100</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,101" id="srcline101">101</a></span><span class="line"><span class="mxinfo " id="T3:U412"><span class="var type1" id="S3T3U604">Nvar</span> = <span class="mxinfo " id="T3:U414"><span class="mxinfo " id="T3:U415"><span class="mxinfo " id="T3:U416"><span class="mxinfo " id="T3:U417"><span class="mxinfo " id="T3:U418">2</span> * <span class="var type1" id="S20T3U610">Ntunnel</span></span> + <span class="mxinfo " id="T3:U420"><span class="mxinfo " id="T3:U421">2</span> * <span class="var type1" id="S21T3U613">Nazi</span></span></span> + <span class="mxinfo " id="T3:U423"><span class="mxinfo " id="T3:U424">2</span> * <span class="var type1" id="S22T3U616">Nfpp</span></span></span> + <span class="mxinfo " id="T3:U426">3</span></span></span>;<span class="comment">%number of variables in quad</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,102" id="srcline102">102</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T11:U427"><span class="var type1" id="S17T3U621">no_azi_angle_constr</span> == <span class="mxinfo " id="T3:U429">0</span></span> <span class="comment">% there is angle constraint</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,103" id="srcline103">103</a></span><span class="line">    <span class="mxinfo " id="T3:U430"><span class="var type1" id="S41T3U625">N_A</span> = <span class="mxinfo " id="T3:U432"><span class="mxinfo " id="T3:U433"><span class="mxinfo " id="T3:U434"><span class="var type1" id="S20T3U629">Ntunnel</span> * <span class="mxinfo " id="T3:U436">2</span></span> + <span class="mxinfo " id="T3:U437"><span class="var type1" id="S21T3U632">Nazi</span> * (<span class="mxinfo " id="T3:U439"><span class="mxinfo " id="T3:U440">5</span> + <span class="var type1" id="S27T3U636">NA_azi</span></span>)</span></span> + <span class="mxinfo " id="T3:U442"><span class="var type1" id="S22T3U638">Nfpp</span> * (<span class="mxinfo " id="T3:U444"><span class="mxinfo " id="T3:U445">5</span> + <span class="var type1" id="S13T3U642">NA_fpp</span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,104" id="srcline104">104</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,105" id="srcline105">105</a></span><span class="line">    <span class="mxinfo " id="T3:U447"><span class="var type1" id="S41T3U646">N_A</span> = <span class="mxinfo " id="T3:U449"><span class="mxinfo " id="T3:U450"><span class="mxinfo " id="T3:U451"><span class="var type1" id="S20T3U650">Ntunnel</span> * <span class="mxinfo " id="T3:U453">2</span></span> + <span class="mxinfo " id="T3:U454"><span class="var type1" id="S21T3U653">Nazi</span> *  <span class="var type1" id="S27T3U654">NA_azi</span></span></span> + <span class="mxinfo " id="T3:U457"><span class="var type1" id="S22T3U656">Nfpp</span> * (<span class="mxinfo " id="T3:U459"><span class="mxinfo " id="T3:U460">5</span> + <span class="var type1" id="S13T3U660">NA_fpp</span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,106" id="srcline106">106</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,107" id="srcline107">107</a></span><span class="line"><span class="comment">%% ------------------------------------------------------</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,108" id="srcline108">108</a></span><span class="line"><span class="mxinfo " id="T18:U462"><span class="var type1" id="S4T18U663">H</span> = <span class="mxinfo " id="T18:U464">eye(<span class="var type1" id="S3T3U666">Nvar</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,109" id="srcline109">109</a></span><span class="line"><span class="mxinfo " id="T1:U466"><span class="var type1" id="S5T1U669">f</span>= <span class="mxinfo " id="T1:U468">zeros(<span class="var type1" id="S3T3U672">Nvar</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,110" id="srcline110">110</a></span><span class="line"><span class="mxinfo " id="T3:U470"><span class="var type1" id="S43T3U676">N_Aeq</span> = <span class="mxinfo " id="T3:U472"><span class="mxinfo " id="T3:U473">3</span> + <span class="var type1" id="S20T3U679">Ntunnel</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,111" id="srcline111">111</a></span><span class="line"><span class="mxinfo " id="T18:U475"><span class="var type1" id="S8T18U682">Aeq</span>= <span class="mxinfo " id="T18:U477">zeros(<span class="var type1" id="S43T3U685">N_Aeq</span>,<span class="var type1" id="S3T3U686">Nvar</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,112" id="srcline112">112</a></span><span class="line"><span class="mxinfo " id="T1:U480"><span class="var type1" id="S9T1U689">beq</span>=<span class="mxinfo " id="T1:U482">zeros(<span class="var type1" id="S43T3U692">N_Aeq</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,113" id="srcline113">113</a></span><span class="line"><span class="mxinfo " id="T3:U484"><span class="mxinfo " id="T3:U485"><span class="var type1" id="S9T1U697">beq</span>(<span class="mxinfo " id="T3:U487">1</span>)</span> = <span class="mxinfo " id="T3:U488"><span class="var type1" id="S11T7U700">T_r</span>.Tx</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,114" id="srcline114">114</a></span><span class="line"><span class="mxinfo " id="T3:U490"><span class="mxinfo " id="T3:U491"><span class="var type1" id="S9T1U705">beq</span>(<span class="mxinfo " id="T3:U493">2</span>)</span> = <span class="mxinfo " id="T3:U494"><span class="var type1" id="S11T7U708">T_r</span>.Ty</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,115" id="srcline115">115</a></span><span class="line"><span class="mxinfo " id="T3:U496"><span class="mxinfo " id="T3:U497"><span class="var type1" id="S9T1U713">beq</span>(<span class="mxinfo " id="T3:U499">3</span>)</span> = <span class="mxinfo " id="T3:U500"><span class="var type1" id="S11T7U716">T_r</span>.Tm</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,116" id="srcline116">116</a></span><span class="line"><span class="mxinfo " id="T18:U502"><span class="var type1" id="S6T18U720">A</span>=<span class="mxinfo " id="T18:U504">zeros(<span class="var type1" id="S41T3U723">N_A</span>,<span class="var type1" id="S3T3U724">Nvar</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,117" id="srcline117">117</a></span><span class="line"><span class="mxinfo " id="T1:U507"><span class="var type1" id="S7T1U727">b</span>= <span class="mxinfo " id="T1:U509">zeros(<span class="var type1" id="S41T3U730">N_A</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,118" id="srcline118">118</a></span><span class="line"><span class="comment">% ------------------------------------------------------</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,119" id="srcline119">119</a></span><span class="line"><span class="mxinfo " id="T3:U511"><span class="var type1" id="S44T3U734">i_H</span> = <span class="mxinfo " id="T3:U513">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,120" id="srcline120">120</a></span><span class="line"><span class="mxinfo " id="T3:U514"><span class="var type1" id="S45T3U738">numOfTunnel</span>=<span class="mxinfo " id="T3:U516">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,121" id="srcline121">121</a></span><span class="line"><span class="mxinfo " id="T3:U517"><span class="var type1" id="S46T3U742">numOfAzi</span>=<span class="mxinfo " id="T3:U519">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,122" id="srcline122">122</a></span><span class="line"><span class="mxinfo " id="T3:U520"><span class="var type1" id="S47T3U746">numOfFpp</span>=<span class="mxinfo " id="T3:U522">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,123" id="srcline123">123</a></span><span class="line"><span class="mxinfo " id="T3:U523"><span class="var type1" id="S48T3U750">pos_A</span> = <span class="mxinfo " id="T3:U525">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,124" id="srcline124">124</a></span><span class="line"><span class="mxinfo " id="T3:U526"><span class="var type1" id="S49T3U754">pos_Aeq</span> = <span class="mxinfo " id="T3:U528">4</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,125" id="srcline125">125</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S30T3U758">j</span>=<span class="mxinfo " id="T1:U530"><span class="mxinfo " id="T3:U531">1</span>:<span class="var type1" id="S12T3U761">N_enabled_thruster</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,126" id="srcline126">126</a></span><span class="line">    <span class="keyword">switch</span> <span class="mxinfo " id="T3:U533"><span class="mxinfo " id="T25:U534"><span class="var type1" id="S2T4U765">thruster_data</span>(<span class="var type1" id="S30T3U766">j</span>)</span>.type</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,127" id="srcline127">127</a></span><span class="line">        <span class="keyword">case</span> <span class="mxinfo " id="T3:U537">4</span>  <span class="comment">%tunnel</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,128" id="srcline128">128</a></span><span class="line">            <span class="mxinfo " id="T3:U538"><span class="mxinfo " id="T3:U539"><span class="var type1" id="S4T18U773">H</span>(<span class="var type1" id="S44T3U774">i_H</span>,<span class="var type1" id="S44T3U775">i_H</span>)</span> = <span class="mxinfo " id="T3:U543"><span class="mxinfo " id="T5:U544"><span class="mxinfo " id="T25:U545"><span class="var type1" id="S2T4U779">thruster_data</span>(<span class="var type1" id="S30T3U780">j</span>)</span>.weight</span>(<span class="mxinfo " id="T3:U548">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,129" id="srcline129">129</a></span><span class="line">            <span class="mxinfo " id="T3:U549"><span class="mxinfo " id="T3:U550"><span class="var type1" id="S4T18U786">H</span>(<span class="mxinfo " id="T3:U552"><span class="var type1" id="S44T3U788">i_H</span> + <span class="mxinfo " id="T3:U554">1</span></span>,<span class="mxinfo " id="T3:U555"><span class="var type1" id="S44T3U791">i_H</span> + <span class="mxinfo " id="T3:U557">1</span></span>)</span> = <span class="mxinfo " id="T3:U558"><span class="mxinfo " id="T5:U559"><span class="mxinfo " id="T25:U560"><span class="var type1" id="S2T4U796">thruster_data</span>(<span class="var type1" id="S30T3U797">j</span>)</span>.weight</span>(<span class="mxinfo " id="T3:U563">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,130" id="srcline130">130</a></span><span class="line">            <span class="mxinfo " id="T3:U564"><span class="var type1" id="S44T3U802">i_H</span> = <span class="mxinfo " id="T3:U566"><span class="var type1" id="S44T3U804">i_H</span> + <span class="mxinfo " id="T3:U568">2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,131" id="srcline131">131</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,132" id="srcline132">132</a></span><span class="line">            <span class="keyword">for</span> <span class="var type1" id="S50T3U808">i</span> = <span class="mxinfo " id="T6:U570"><span class="mxinfo " id="T3:U571">1</span>:3</span><span class="comment">%R1 R2 R3</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,133" id="srcline133">133</a></span><span class="line">                <span class="keyword">switch</span> <span class="var type1" id="S50T3U813">i</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,134" id="srcline134">134</a></span><span class="line">                    <span class="keyword">case</span> <span class="mxinfo " id="T3:U573">1</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,135" id="srcline135">135</a></span><span class="line">                        <span class="mxinfo " id="T3:U574"><span class="mxinfo " id="T3:U575"><span class="var type1" id="S8T18U819">Aeq</span>(<span class="var type1" id="S50T3U820">i</span>,<span class="mxinfo " id="T3:U578"><span class="mxinfo " id="T3:U579"><span class="mxinfo " id="T3:U580"><span class="mxinfo " id="T3:U581"><span class="var type1" id="S46T3U825">numOfAzi</span> * <span class="mxinfo " id="T3:U583">2</span></span> + <span class="mxinfo " id="T3:U584"><span class="var type1" id="S45T3U828">numOfTunnel</span> * <span class="mxinfo " id="T3:U586">2</span></span></span> + <span class="mxinfo " id="T3:U587"><span class="var type1" id="S47T3U831">numOfFpp</span> * <span class="mxinfo " id="T3:U589">2</span></span></span> + <span class="mxinfo " id="T3:U590">1</span></span>)</span> = <span class="mxinfo " id="T3:U591">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,136" id="srcline136">136</a></span><span class="line">                        <span class="mxinfo " id="T3:U592"><span class="mxinfo " id="T3:U593"><span class="var type1" id="S8T18U838">Aeq</span>(<span class="var type1" id="S50T3U839">i</span>,<span class="mxinfo " id="T3:U596"><span class="mxinfo " id="T3:U597"><span class="mxinfo " id="T3:U598"><span class="mxinfo " id="T3:U599"><span class="var type1" id="S46T3U844">numOfAzi</span> * <span class="mxinfo " id="T3:U601">2</span></span> + <span class="mxinfo " id="T3:U602"><span class="var type1" id="S45T3U847">numOfTunnel</span> * <span class="mxinfo " id="T3:U604">2</span></span></span> + <span class="mxinfo " id="T3:U605"><span class="var type1" id="S47T3U850">numOfFpp</span> * <span class="mxinfo " id="T3:U607">2</span></span></span> + <span class="mxinfo " id="T3:U608">2</span></span>)</span> = <span class="mxinfo " id="T3:U609">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,137" id="srcline137">137</a></span><span class="line">                    <span class="keyword">case</span> <span class="mxinfo " id="T3:U610">2</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,138" id="srcline138">138</a></span><span class="line">                        <span class="mxinfo " id="T3:U611"><span class="mxinfo " id="T3:U612"><span class="var type1" id="S8T18U859">Aeq</span>(<span class="var type1" id="S50T3U860">i</span>,<span class="mxinfo " id="T3:U615"><span class="mxinfo " id="T3:U616"><span class="mxinfo " id="T3:U617"><span class="mxinfo " id="T3:U618"><span class="var type1" id="S46T3U865">numOfAzi</span> * <span class="mxinfo " id="T3:U620">2</span></span> + <span class="mxinfo " id="T3:U621"><span class="var type1" id="S45T3U868">numOfTunnel</span> * <span class="mxinfo " id="T3:U623">2</span></span></span> + <span class="mxinfo " id="T3:U624"><span class="var type1" id="S47T3U871">numOfFpp</span> * <span class="mxinfo " id="T3:U626">2</span></span></span> + <span class="mxinfo " id="T3:U627">1</span></span>)</span> = <span class="mxinfo " id="T3:U628">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,139" id="srcline139">139</a></span><span class="line">                        <span class="mxinfo " id="T3:U629"><span class="mxinfo " id="T3:U630"><span class="var type1" id="S8T18U878">Aeq</span>(<span class="var type1" id="S50T3U879">i</span>,<span class="mxinfo " id="T3:U633"><span class="mxinfo " id="T3:U634"><span class="mxinfo " id="T3:U635"><span class="mxinfo " id="T3:U636"><span class="var type1" id="S46T3U884">numOfAzi</span> * <span class="mxinfo " id="T3:U638">2</span></span> + <span class="mxinfo " id="T3:U639"><span class="var type1" id="S45T3U887">numOfTunnel</span> * <span class="mxinfo " id="T3:U641">2</span></span></span> + <span class="mxinfo " id="T3:U642"><span class="var type1" id="S47T3U890">numOfFpp</span> * <span class="mxinfo " id="T3:U644">2</span></span></span> + <span class="mxinfo " id="T3:U645">2</span></span>)</span> = <span class="mxinfo " id="T3:U646">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,140" id="srcline140">140</a></span><span class="line">                    <span class="keyword">case</span> <span class="mxinfo " id="T3:U647">3</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,141" id="srcline141">141</a></span><span class="line">                        <span class="mxinfo " id="T3:U648"><span class="mxinfo " id="T3:U649"><span class="var type1" id="S8T18U899">Aeq</span>(<span class="var type1" id="S50T3U900">i</span>,<span class="mxinfo " id="T3:U652"><span class="mxinfo " id="T3:U653"><span class="mxinfo " id="T3:U654"><span class="mxinfo " id="T3:U655"><span class="var type1" id="S46T3U905">numOfAzi</span> * <span class="mxinfo " id="T3:U657">2</span></span> + <span class="mxinfo " id="T3:U658"><span class="var type1" id="S45T3U908">numOfTunnel</span> * <span class="mxinfo " id="T3:U660">2</span></span></span> + <span class="mxinfo " id="T3:U661"><span class="var type1" id="S47T3U911">numOfFpp</span> * <span class="mxinfo " id="T3:U663">2</span></span></span> + <span class="mxinfo " id="T3:U664">1</span></span>)</span> = <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,142" id="srcline142">142</a></span><span class="line">                            <span class="mxinfo " id="T3:U665"><span class="mxinfo " id="T3:U666">- <span class="mxinfo " id="T3:U667"><span class="mxinfo " id="T25:U668"><span class="var type1" id="S2T4U918">thruster_data</span>(<span class="var type1" id="S30T3U919">j</span>)</span>.y</span></span> + <span class="mxinfo " id="T3:U671"><span class="mxinfo " id="T25:U672"><span class="var type1" id="S2T4U923">thruster_data</span>(<span class="var type1" id="S30T3U924">j</span>)</span>.y0</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,143" id="srcline143">143</a></span><span class="line">                        <span class="mxinfo " id="T3:U675"><span class="mxinfo " id="T3:U676"><span class="var type1" id="S8T18U929">Aeq</span>(<span class="var type1" id="S50T3U930">i</span>,<span class="mxinfo " id="T3:U679"><span class="mxinfo " id="T3:U680"><span class="mxinfo " id="T3:U681"><span class="mxinfo " id="T3:U682"><span class="var type1" id="S46T3U935">numOfAzi</span> * <span class="mxinfo " id="T3:U684">2</span></span> + <span class="mxinfo " id="T3:U685"><span class="var type1" id="S45T3U938">numOfTunnel</span> * <span class="mxinfo " id="T3:U687">2</span></span></span> + <span class="mxinfo " id="T3:U688"><span class="var type1" id="S47T3U941">numOfFpp</span> * <span class="mxinfo " id="T3:U690">2</span></span></span> + <span class="mxinfo " id="T3:U691">2</span></span>)</span> = <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,144" id="srcline144">144</a></span><span class="line">                            <span class="mxinfo " id="T3:U692"><span class="mxinfo " id="T3:U693"><span class="mxinfo " id="T25:U694"><span class="var type1" id="S2T4U947">thruster_data</span>(<span class="var type1" id="S30T3U948">j</span>)</span>.x</span> - <span class="mxinfo " id="T3:U697"><span class="mxinfo " id="T25:U698"><span class="var type1" id="S2T4U952">thruster_data</span>(<span class="var type1" id="S30T3U953">j</span>)</span>.x0</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,145" id="srcline145">145</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,146" id="srcline146">146</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,147" id="srcline147">147</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,148" id="srcline148">148</a></span><span class="line">            <span class="mxinfo " id="T3:U701"><span class="mxinfo " id="T3:U702"><span class="var type1" id="S8T18U958">Aeq</span>(<span class="var type1" id="S49T3U959">pos_Aeq</span>,<span class="mxinfo " id="T3:U705"><span class="mxinfo " id="T3:U706"><span class="mxinfo " id="T3:U707"><span class="mxinfo " id="T3:U708"><span class="var type1" id="S46T3U964">numOfAzi</span> * <span class="mxinfo " id="T3:U710">2</span></span> + <span class="mxinfo " id="T3:U711"><span class="var type1" id="S45T3U967">numOfTunnel</span> * <span class="mxinfo " id="T3:U713">2</span></span></span> + <span class="mxinfo " id="T3:U714"><span class="var type1" id="S47T3U970">numOfFpp</span> * <span class="mxinfo " id="T3:U716">2</span></span></span> + <span class="mxinfo " id="T3:U717">1</span></span>)</span> = <span class="mxinfo " id="T3:U718">sin(<span class="mxinfo " id="T3:U719"><span class="mxinfo " id="T25:U720"><span class="var type1" id="S2T4U977">thruster_data</span>(<span class="var type1" id="S30T3U978">j</span>)</span>.phi</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,149" id="srcline149">149</a></span><span class="line">            <span class="mxinfo " id="T3:U723"><span class="mxinfo " id="T3:U724"><span class="var type1" id="S8T18U983">Aeq</span>(<span class="var type1" id="S49T3U984">pos_Aeq</span>,<span class="mxinfo " id="T3:U727"><span class="mxinfo " id="T3:U728"><span class="mxinfo " id="T3:U729"><span class="mxinfo " id="T3:U730"><span class="var type1" id="S46T3U989">numOfAzi</span> * <span class="mxinfo " id="T3:U732">2</span></span> + <span class="mxinfo " id="T3:U733"><span class="var type1" id="S45T3U992">numOfTunnel</span> * <span class="mxinfo " id="T3:U735">2</span></span></span> + <span class="mxinfo " id="T3:U736"><span class="var type1" id="S47T3U995">numOfFpp</span> * <span class="mxinfo " id="T3:U738">2</span></span></span> + <span class="mxinfo " id="T3:U739">2</span></span>)</span> = <span class="mxinfo " id="T3:U740">-<span class="mxinfo " id="T3:U741">cos(<span class="mxinfo " id="T3:U742"><span class="mxinfo " id="T25:U743"><span class="var type1" id="S2T4U1003">thruster_data</span>(<span class="var type1" id="S30T3U1004">j</span>)</span>.phi</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,150" id="srcline150">150</a></span><span class="line">            <span class="mxinfo " id="T3:U746"><span class="mxinfo " id="T3:U747"><span class="var type1" id="S9T1U1009">beq</span>(<span class="var type1" id="S49T3U1010">pos_Aeq</span>)</span> = <span class="mxinfo " id="T3:U750">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,151" id="srcline151">151</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,152" id="srcline152">152</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,153" id="srcline153">153</a></span><span class="line">            <span class="mxinfo " id="T3:U751"><span class="mxinfo " id="T3:U752"><span class="var type1" id="S6T18U1015">A</span>(<span class="var type1" id="S48T3U1016">pos_A</span>,<span class="mxinfo " id="T3:U755"><span class="mxinfo " id="T3:U756"><span class="mxinfo " id="T3:U757"><span class="mxinfo " id="T3:U758"><span class="var type1" id="S46T3U1021">numOfAzi</span> * <span class="mxinfo " id="T3:U760">2</span></span> + <span class="mxinfo " id="T3:U761"><span class="var type1" id="S45T3U1024">numOfTunnel</span> * <span class="mxinfo " id="T3:U763">2</span></span></span> + <span class="mxinfo " id="T3:U764"><span class="var type1" id="S47T3U1027">numOfFpp</span> * <span class="mxinfo " id="T3:U766">2</span></span></span> + <span class="mxinfo " id="T3:U767">1</span></span>)</span> = <span class="mxinfo " id="T3:U768">-<span class="mxinfo " id="T3:U769">cos(<span class="mxinfo " id="T3:U770"><span class="mxinfo " id="T25:U771"><span class="var type1" id="S2T4U1035">thruster_data</span>(<span class="var type1" id="S30T3U1036">j</span>)</span>.phi</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,154" id="srcline154">154</a></span><span class="line">            <span class="mxinfo " id="T3:U774"><span class="mxinfo " id="T3:U775"><span class="var type1" id="S6T18U1041">A</span>(<span class="var type1" id="S48T3U1042">pos_A</span>,<span class="mxinfo " id="T3:U778"><span class="mxinfo " id="T3:U779"><span class="mxinfo " id="T3:U780"><span class="mxinfo " id="T3:U781"><span class="var type1" id="S46T3U1047">numOfAzi</span> * <span class="mxinfo " id="T3:U783">2</span></span> + <span class="mxinfo " id="T3:U784"><span class="var type1" id="S45T3U1050">numOfTunnel</span> * <span class="mxinfo " id="T3:U786">2</span></span></span> + <span class="mxinfo " id="T3:U787"><span class="var type1" id="S47T3U1053">numOfFpp</span> * <span class="mxinfo " id="T3:U789">2</span></span></span> + <span class="mxinfo " id="T3:U790">2</span></span>)</span> = <span class="mxinfo " id="T3:U791">-<span class="mxinfo " id="T3:U792">sin(<span class="mxinfo " id="T3:U793"><span class="mxinfo " id="T25:U794"><span class="var type1" id="S2T4U1061">thruster_data</span>(<span class="var type1" id="S30T3U1062">j</span>)</span>.phi</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,155" id="srcline155">155</a></span><span class="line">            <span class="mxinfo " id="T3:U797"><span class="mxinfo " id="T3:U798"><span class="var type1" id="S7T1U1067">b</span>(<span class="var type1" id="S48T3U1068">pos_A</span>)</span> = <span class="mxinfo " id="T3:U801">-<span class="mxinfo " id="T3:U802"><span class="mxinfo " id="T25:U803"><span class="var type1" id="S2T4U1072">thruster_data</span>(<span class="var type1" id="S30T3U1073">j</span>)</span>.Tplus</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,156" id="srcline156">156</a></span><span class="line">            <span class="mxinfo " id="T3:U806"><span class="mxinfo " id="T3:U807"><span class="var type1" id="S6T18U1078">A</span>(<span class="mxinfo " id="T3:U809"><span class="var type1" id="S48T3U1080">pos_A</span> + <span class="mxinfo " id="T3:U811">1</span></span>,<span class="mxinfo " id="T3:U812"><span class="mxinfo " id="T3:U813"><span class="mxinfo " id="T3:U814"><span class="mxinfo " id="T3:U815"><span class="var type1" id="S46T3U1086">numOfAzi</span> * <span class="mxinfo " id="T3:U817">2</span></span> + <span class="mxinfo " id="T3:U818"><span class="var type1" id="S45T3U1089">numOfTunnel</span> * <span class="mxinfo " id="T3:U820">2</span></span></span> + <span class="mxinfo " id="T3:U821"><span class="var type1" id="S47T3U1092">numOfFpp</span> * <span class="mxinfo " id="T3:U823">2</span></span></span> + <span class="mxinfo " id="T3:U824">1</span></span>)</span> = <span class="mxinfo " id="T3:U825">cos(<span class="mxinfo " id="T3:U826"><span class="mxinfo " id="T25:U827"><span class="var type1" id="S2T4U1099">thruster_data</span>(<span class="var type1" id="S30T3U1100">j</span>)</span>.phi</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,157" id="srcline157">157</a></span><span class="line">            <span class="mxinfo " id="T3:U830"><span class="mxinfo " id="T3:U831"><span class="var type1" id="S6T18U1105">A</span>(<span class="mxinfo " id="T3:U833"><span class="var type1" id="S48T3U1107">pos_A</span> + <span class="mxinfo " id="T3:U835">1</span></span>,<span class="mxinfo " id="T3:U836"><span class="mxinfo " id="T3:U837"><span class="mxinfo " id="T3:U838"><span class="mxinfo " id="T3:U839"><span class="var type1" id="S46T3U1113">numOfAzi</span> * <span class="mxinfo " id="T3:U841">2</span></span> + <span class="mxinfo " id="T3:U842"><span class="var type1" id="S45T3U1116">numOfTunnel</span> * <span class="mxinfo " id="T3:U844">2</span></span></span> + <span class="mxinfo " id="T3:U845"><span class="var type1" id="S47T3U1119">numOfFpp</span> * <span class="mxinfo " id="T3:U847">2</span></span></span> + <span class="mxinfo " id="T3:U848">2</span></span>)</span> = <span class="mxinfo " id="T3:U849">sin(<span class="mxinfo " id="T3:U850"><span class="mxinfo " id="T25:U851"><span class="var type1" id="S2T4U1126">thruster_data</span>(<span class="var type1" id="S30T3U1127">j</span>)</span>.phi</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,158" id="srcline158">158</a></span><span class="line">            <span class="mxinfo " id="T3:U854"><span class="mxinfo " id="T3:U855"><span class="var type1" id="S7T1U1132">b</span>(<span class="mxinfo " id="T3:U857"><span class="var type1" id="S48T3U1134">pos_A</span> + <span class="mxinfo " id="T3:U859">1</span></span>)</span> = <span class="mxinfo " id="T3:U860"><span class="mxinfo " id="T25:U861"><span class="var type1" id="S2T4U1138">thruster_data</span>(<span class="var type1" id="S30T3U1139">j</span>)</span>.T_</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,159" id="srcline159">159</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,160" id="srcline160">160</a></span><span class="line">            <span class="comment">%             check_rudder_constr(thruster_data(j).Tmax*[-1 -1;-1 1;1 1;1 -1],A(pos_A:pos_A + 1, <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,161" id="srcline161">161</a></span><span class="line">            <span class="comment">%                 numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 1:numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 2), <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,162" id="srcline162">162</a></span><span class="line">            <span class="comment">%                 b(pos_A:pos_A + 1));</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,163" id="srcline163">163</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,164" id="srcline164">164</a></span><span class="line">            <span class="mxinfo " id="T3:U864"><span class="var type1" id="S48T3U1143">pos_A</span> = <span class="mxinfo " id="T3:U866"><span class="var type1" id="S48T3U1145">pos_A</span> + <span class="mxinfo " id="T3:U868">2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,165" id="srcline165">165</a></span><span class="line">            <span class="mxinfo " id="T3:U869"><span class="var type1" id="S49T3U1149">pos_Aeq</span> = <span class="mxinfo " id="T3:U871"><span class="var type1" id="S49T3U1151">pos_Aeq</span> + <span class="mxinfo " id="T3:U873">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,166" id="srcline166">166</a></span><span class="line">            <span class="mxinfo " id="T3:U874"><span class="var type1" id="S45T3U1155">numOfTunnel</span> = <span class="mxinfo " id="T3:U876"><span class="var type1" id="S45T3U1157">numOfTunnel</span> + <span class="mxinfo " id="T3:U878">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,167" id="srcline167">167</a></span><span class="line">        <span class="keyword">case</span> <span class="mxinfo " id="T3:U879">3</span>  <span class="comment">%azi</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,168" id="srcline168">168</a></span><span class="line">            <span class="mxinfo " id="T3:U880"><span class="mxinfo " id="T3:U881"><span class="var type1" id="S4T18U1164">H</span>(<span class="var type1" id="S44T3U1165">i_H</span>,<span class="var type1" id="S44T3U1166">i_H</span>)</span> = <span class="mxinfo " id="T3:U885"><span class="mxinfo " id="T5:U886"><span class="mxinfo " id="T25:U887"><span class="var type1" id="S2T4U1170">thruster_data</span>(<span class="var type1" id="S30T3U1171">j</span>)</span>.weight</span>(<span class="mxinfo " id="T3:U890">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,169" id="srcline169">169</a></span><span class="line">            <span class="mxinfo " id="T3:U891"><span class="mxinfo " id="T3:U892"><span class="var type1" id="S4T18U1177">H</span>(<span class="mxinfo " id="T3:U894"><span class="var type1" id="S44T3U1179">i_H</span> + <span class="mxinfo " id="T3:U896">1</span></span>,<span class="mxinfo " id="T3:U897"><span class="var type1" id="S44T3U1182">i_H</span> + <span class="mxinfo " id="T3:U899">1</span></span>)</span> = <span class="mxinfo " id="T3:U900"><span class="mxinfo " id="T5:U901"><span class="mxinfo " id="T25:U902"><span class="var type1" id="S2T4U1187">thruster_data</span>(<span class="var type1" id="S30T3U1188">j</span>)</span>.weight</span>(<span class="mxinfo " id="T3:U905">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,170" id="srcline170">170</a></span><span class="line">            <span class="mxinfo " id="T3:U906"><span class="var type1" id="S44T3U1193">i_H</span> = <span class="mxinfo " id="T3:U908"><span class="var type1" id="S44T3U1195">i_H</span> + <span class="mxinfo " id="T3:U910">2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,171" id="srcline171">171</a></span><span class="line">            <span class="keyword">for</span> <span class="var type1" id="S51T3U1199">ixy</span> =<span class="mxinfo " id="T48:U912"><span class="mxinfo " id="T3:U913">1</span>:2</span> <span class="comment">% xthurst and ythrust</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,172" id="srcline172">172</a></span><span class="line">                <span class="keyword">for</span> <span class="var type1" id="S50T3U1205">i</span> = <span class="mxinfo " id="T6:U915"><span class="mxinfo " id="T3:U916">1</span>:3</span> <span class="comment">%R1 R2 R3</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,173" id="srcline173">173</a></span><span class="line">                    <span class="keyword">if</span> <span class="mxinfo " id="T11:U917"><span class="var type1" id="S51T3U1212">ixy</span> == <span class="mxinfo " id="T3:U919">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,174" id="srcline174">174</a></span><span class="line">                        <span class="keyword">switch</span> <span class="var type1" id="S50T3U1215">i</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,175" id="srcline175">175</a></span><span class="line">                            <span class="keyword">case</span> <span class="mxinfo " id="T3:U921">1</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,176" id="srcline176">176</a></span><span class="line">                                <span class="mxinfo " id="T3:U922"><span class="mxinfo " id="T3:U923"><span class="var type1" id="S8T18U1221">Aeq</span>(<span class="var type1" id="S50T3U1222">i</span>,<span class="mxinfo " id="T3:U926"><span class="mxinfo " id="T3:U927"><span class="mxinfo " id="T3:U928"><span class="mxinfo " id="T3:U929"><span class="var type1" id="S46T3U1227">numOfAzi</span> * <span class="mxinfo " id="T3:U931">2</span></span> + <span class="mxinfo " id="T3:U932"><span class="var type1" id="S45T3U1230">numOfTunnel</span> * <span class="mxinfo " id="T3:U934">2</span></span></span> + <span class="mxinfo " id="T3:U935"><span class="var type1" id="S47T3U1233">numOfFpp</span> * <span class="mxinfo " id="T3:U937">2</span></span></span> + <span class="var type1" id="S51T3U1235">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U939">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,177" id="srcline177">177</a></span><span class="line">                            <span class="keyword">case</span> <span class="mxinfo " id="T3:U940">2</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,178" id="srcline178">178</a></span><span class="line">                                <span class="mxinfo " id="T3:U941"><span class="mxinfo " id="T3:U942"><span class="var type1" id="S8T18U1242">Aeq</span>(<span class="var type1" id="S50T3U1243">i</span>,<span class="mxinfo " id="T3:U945"><span class="mxinfo " id="T3:U946"><span class="mxinfo " id="T3:U947"><span class="mxinfo " id="T3:U948"><span class="var type1" id="S46T3U1248">numOfAzi</span> * <span class="mxinfo " id="T3:U950">2</span></span> + <span class="mxinfo " id="T3:U951"><span class="var type1" id="S45T3U1251">numOfTunnel</span> * <span class="mxinfo " id="T3:U953">2</span></span></span> + <span class="mxinfo " id="T3:U954"><span class="var type1" id="S47T3U1254">numOfFpp</span> * <span class="mxinfo " id="T3:U956">2</span></span></span> + <span class="var type1" id="S51T3U1256">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U958">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,179" id="srcline179">179</a></span><span class="line">                            <span class="keyword">case</span> <span class="mxinfo " id="T3:U959">3</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,180" id="srcline180">180</a></span><span class="line">                                <span class="mxinfo " id="T3:U960"><span class="mxinfo " id="T3:U961"><span class="var type1" id="S8T18U1263">Aeq</span>(<span class="var type1" id="S50T3U1264">i</span>,<span class="mxinfo " id="T3:U964"><span class="mxinfo " id="T3:U965"><span class="mxinfo " id="T3:U966"><span class="mxinfo " id="T3:U967"><span class="var type1" id="S46T3U1269">numOfAzi</span> * <span class="mxinfo " id="T3:U969">2</span></span> + <span class="mxinfo " id="T3:U970"><span class="var type1" id="S45T3U1272">numOfTunnel</span> * <span class="mxinfo " id="T3:U972">2</span></span></span> + <span class="mxinfo " id="T3:U973"><span class="var type1" id="S47T3U1275">numOfFpp</span> * <span class="mxinfo " id="T3:U975">2</span></span></span> + <span class="var type1" id="S51T3U1277">ixy</span></span>)</span> = <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,181" id="srcline181">181</a></span><span class="line">                                    <span class="mxinfo " id="T3:U977"><span class="mxinfo " id="T3:U978">- <span class="mxinfo " id="T3:U979"><span class="mxinfo " id="T25:U980"><span class="var type1" id="S2T4U1282">thruster_data</span>(<span class="var type1" id="S30T3U1283">j</span>)</span>.y</span></span> + <span class="mxinfo " id="T3:U983"><span class="mxinfo " id="T25:U984"><span class="var type1" id="S2T4U1287">thruster_data</span>(<span class="var type1" id="S30T3U1288">j</span>)</span>.y0</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,182" id="srcline182">182</a></span><span class="line">                        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,183" id="srcline183">183</a></span><span class="line">                        </span></span>
<span class="srcline"><span class="lineno"><a href="81,184" id="srcline184">184</a></span><span class="line">                    <span class="keyword">elseif</span> <span class="mxinfo " id="T11:U987"><span class="var type1" id="S51T3U1292">ixy</span> ==<span class="mxinfo " id="T3:U989">2</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,185" id="srcline185">185</a></span><span class="line">                        <span class="keyword">switch</span> <span class="var type1" id="S50T3U1295">i</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,186" id="srcline186">186</a></span><span class="line">                            <span class="keyword">case</span> <span class="mxinfo " id="T3:U991">1</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,187" id="srcline187">187</a></span><span class="line">                                <span class="mxinfo " id="T3:U992"><span class="mxinfo " id="T3:U993"><span class="var type1" id="S8T18U1301">Aeq</span>(<span class="var type1" id="S50T3U1302">i</span>,<span class="mxinfo " id="T3:U996"><span class="mxinfo " id="T3:U997"><span class="mxinfo " id="T3:U998"><span class="mxinfo " id="T3:U999"><span class="var type1" id="S46T3U1307">numOfAzi</span> * <span class="mxinfo " id="T3:U1001">2</span></span> + <span class="mxinfo " id="T3:U1002"><span class="var type1" id="S45T3U1310">numOfTunnel</span> * <span class="mxinfo " id="T3:U1004">2</span></span></span> + <span class="mxinfo " id="T3:U1005"><span class="var type1" id="S47T3U1313">numOfFpp</span> * <span class="mxinfo " id="T3:U1007">2</span></span></span> + <span class="var type1" id="S51T3U1315">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1009">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,188" id="srcline188">188</a></span><span class="line">                            <span class="keyword">case</span> <span class="mxinfo " id="T3:U1010">2</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,189" id="srcline189">189</a></span><span class="line">                                <span class="mxinfo " id="T3:U1011"><span class="mxinfo " id="T3:U1012"><span class="var type1" id="S8T18U1322">Aeq</span>(<span class="var type1" id="S50T3U1323">i</span>,<span class="mxinfo " id="T3:U1015"><span class="mxinfo " id="T3:U1016"><span class="mxinfo " id="T3:U1017"><span class="mxinfo " id="T3:U1018"><span class="var type1" id="S46T3U1328">numOfAzi</span> * <span class="mxinfo " id="T3:U1020">2</span></span> + <span class="mxinfo " id="T3:U1021"><span class="var type1" id="S45T3U1331">numOfTunnel</span> * <span class="mxinfo " id="T3:U1023">2</span></span></span> + <span class="mxinfo " id="T3:U1024"><span class="var type1" id="S47T3U1334">numOfFpp</span> * <span class="mxinfo " id="T3:U1026">2</span></span></span> + <span class="var type1" id="S51T3U1336">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1028">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,190" id="srcline190">190</a></span><span class="line">                            <span class="keyword">case</span> <span class="mxinfo " id="T3:U1029">3</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,191" id="srcline191">191</a></span><span class="line">                                <span class="mxinfo " id="T3:U1030"><span class="mxinfo " id="T3:U1031"><span class="var type1" id="S8T18U1343">Aeq</span>(<span class="var type1" id="S50T3U1344">i</span>,<span class="mxinfo " id="T3:U1034"><span class="mxinfo " id="T3:U1035"><span class="mxinfo " id="T3:U1036"><span class="mxinfo " id="T3:U1037"><span class="var type1" id="S46T3U1349">numOfAzi</span> * <span class="mxinfo " id="T3:U1039">2</span></span> + <span class="mxinfo " id="T3:U1040"><span class="var type1" id="S45T3U1352">numOfTunnel</span> * <span class="mxinfo " id="T3:U1042">2</span></span></span> + <span class="mxinfo " id="T3:U1043"><span class="var type1" id="S47T3U1355">numOfFpp</span> * <span class="mxinfo " id="T3:U1045">2</span></span></span> + <span class="var type1" id="S51T3U1357">ixy</span></span>)</span> = <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,192" id="srcline192">192</a></span><span class="line">                                    <span class="mxinfo " id="T3:U1047"><span class="mxinfo " id="T3:U1048"><span class="mxinfo " id="T25:U1049"><span class="var type1" id="S2T4U1361">thruster_data</span>(<span class="var type1" id="S30T3U1362">j</span>)</span>.x</span> - <span class="mxinfo " id="T3:U1052"><span class="mxinfo " id="T25:U1053"><span class="var type1" id="S2T4U1366">thruster_data</span>(<span class="var type1" id="S30T3U1367">j</span>)</span>.x0</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,193" id="srcline193">193</a></span><span class="line">                                </span></span>
<span class="srcline"><span class="lineno"><a href="81,194" id="srcline194">194</a></span><span class="line">                        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,195" id="srcline195">195</a></span><span class="line">                    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,196" id="srcline196">196</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,197" id="srcline197">197</a></span><span class="line">                </span></span>
<span class="srcline"><span class="lineno"><a href="81,198" id="srcline198">198</a></span><span class="line">                <span class="keyword">if</span> <span class="mxinfo " id="T11:U1056"><span class="var type1" id="S51T3U1372">ixy</span> == <span class="mxinfo " id="T3:U1058">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,199" id="srcline199">199</a></span><span class="line">                    <span class="keyword">if</span> <span class="mxinfo " id="T11:U1059"><span class="var type1" id="S17T3U1377">no_azi_angle_constr</span> == <span class="mxinfo " id="T3:U1061">0</span></span> <span class="comment">% there is angle constraint</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,200" id="srcline200">200</a></span><span class="line">                        <span class="mxinfo " id="T3:U1062"><span class="mxinfo " id="T3:U1063"><span class="var type1" id="S6T18U1382">A</span>(<span class="var type1" id="S48T3U1383">pos_A</span>,<span class="mxinfo " id="T3:U1066"><span class="mxinfo " id="T3:U1067"><span class="mxinfo " id="T3:U1068"><span class="mxinfo " id="T3:U1069"><span class="var type1" id="S46T3U1388">numOfAzi</span> * <span class="mxinfo " id="T3:U1071">2</span></span> + <span class="mxinfo " id="T3:U1072"><span class="var type1" id="S45T3U1391">numOfTunnel</span> * <span class="mxinfo " id="T3:U1074">2</span></span></span> + <span class="mxinfo " id="T3:U1075"><span class="var type1" id="S47T3U1394">numOfFpp</span> * <span class="mxinfo " id="T3:U1077">2</span></span></span> + <span class="var type1" id="S51T3U1396">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1079">-<span class="mxinfo " id="T3:U1080">sin(<span class="mxinfo " id="T3:U1081"><span class="mxinfo " id="T25:U1082"><span class="var type1" id="S2T4U1402">thruster_data</span>(<span class="var type1" id="S30T3U1403">j</span>)</span>.phi_</span>)</span></span></span>;<span class="comment">%(3.15a)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,201" id="srcline201">201</a></span><span class="line">                        <span class="mxinfo " id="T3:U1085"><span class="mxinfo " id="T3:U1086"><span class="var type1" id="S7T1U1408">b</span>(<span class="var type1" id="S48T3U1409">pos_A</span>)</span> = <span class="mxinfo " id="T3:U1089"><span class="mxinfo " id="T3:U1090"><span class="mxinfo " id="T3:U1091">-<span class="var type1" id="S24T3U1413">c2</span></span> * <span class="mxinfo " id="T3:U1093">abs(<span class="mxinfo " id="T3:U1094">cos(<span class="mxinfo " id="T3:U1095"><span class="mxinfo " id="T25:U1096"><span class="var type1" id="S2T4U1420">thruster_data</span>(<span class="var type1" id="S30T3U1421">j</span>)</span>.phi_</span>)</span>)</span></span> * <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,202" id="srcline202">202</a></span><span class="line">                            (<span class="mxinfo " id="T3:U1099"><span class="mxinfo " id="T3:U1100"><span class="mxinfo " id="T25:U1101"><span class="var type1" id="S2T4U1427">thruster_data</span>(<span class="var type1" id="S30T3U1428">j</span>)</span>.Tplus</span> - <span class="mxinfo " id="T3:U1104"><span class="mxinfo " id="T25:U1105"><span class="var type1" id="S2T4U1432">thruster_data</span>(<span class="var type1" id="S30T3U1433">j</span>)</span>.T_</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,203" id="srcline203">203</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,204" id="srcline204">204</a></span><span class="line">                        <span class="mxinfo " id="T3:U1108"><span class="mxinfo " id="T3:U1109"><span class="var type1" id="S6T18U1438">A</span>(<span class="mxinfo " id="T3:U1111"><span class="var type1" id="S48T3U1440">pos_A</span> + <span class="mxinfo " id="T3:U1113">1</span></span>,<span class="mxinfo " id="T3:U1114"><span class="mxinfo " id="T3:U1115"><span class="mxinfo " id="T3:U1116"><span class="mxinfo " id="T3:U1117"><span class="var type1" id="S46T3U1446">numOfAzi</span> * <span class="mxinfo " id="T3:U1119">2</span></span> + <span class="mxinfo " id="T3:U1120"><span class="var type1" id="S45T3U1449">numOfTunnel</span> * <span class="mxinfo " id="T3:U1122">2</span></span></span> + <span class="mxinfo " id="T3:U1123"><span class="var type1" id="S47T3U1452">numOfFpp</span> * <span class="mxinfo " id="T3:U1125">2</span></span></span> + <span class="var type1" id="S51T3U1454">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1127">sin(<span class="mxinfo " id="T3:U1128"><span class="mxinfo " id="T25:U1129"><span class="var type1" id="S2T4U1459">thruster_data</span>(<span class="var type1" id="S30T3U1460">j</span>)</span>.phiPlus</span>)</span></span>;<span class="comment">%(3.15b)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,205" id="srcline205">205</a></span><span class="line">                        <span class="mxinfo " id="T3:U1132"><span class="mxinfo " id="T3:U1133"><span class="var type1" id="S7T1U1465">b</span>(<span class="mxinfo " id="T3:U1135"><span class="var type1" id="S48T3U1467">pos_A</span> + <span class="mxinfo " id="T3:U1137">1</span></span>)</span> = <span class="mxinfo " id="T3:U1138"><span class="mxinfo " id="T3:U1139"><span class="mxinfo " id="T3:U1140">-<span class="var type1" id="S24T3U1472">c2</span></span> * <span class="mxinfo " id="T3:U1142">abs(<span class="mxinfo " id="T3:U1143">cos(<span class="mxinfo " id="T3:U1144"><span class="mxinfo " id="T25:U1145"><span class="var type1" id="S2T4U1479">thruster_data</span>(<span class="var type1" id="S30T3U1480">j</span>)</span>.phiPlus</span>)</span>)</span></span> * <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,206" id="srcline206">206</a></span><span class="line">                            (<span class="mxinfo " id="T3:U1148"><span class="mxinfo " id="T3:U1149"><span class="mxinfo " id="T25:U1150"><span class="var type1" id="S2T4U1486">thruster_data</span>(<span class="var type1" id="S30T3U1487">j</span>)</span>.Tplus</span> - <span class="mxinfo " id="T3:U1153"><span class="mxinfo " id="T25:U1154"><span class="var type1" id="S2T4U1491">thruster_data</span>(<span class="var type1" id="S30T3U1492">j</span>)</span>.T_</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,207" id="srcline207">207</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,208" id="srcline208">208</a></span><span class="line">                        <span class="mxinfo " id="T3:U1157"><span class="mxinfo " id="T3:U1158"><span class="var type1" id="S6T18U1497">A</span>(<span class="mxinfo " id="T3:U1160"><span class="var type1" id="S48T3U1499">pos_A</span> + <span class="mxinfo " id="T3:U1162">2</span></span>,<span class="mxinfo " id="T3:U1163"><span class="mxinfo " id="T3:U1164"><span class="mxinfo " id="T3:U1165"><span class="mxinfo " id="T3:U1166"><span class="var type1" id="S46T3U1505">numOfAzi</span> * <span class="mxinfo " id="T3:U1168">2</span></span> + <span class="mxinfo " id="T3:U1169"><span class="var type1" id="S45T3U1508">numOfTunnel</span> * <span class="mxinfo " id="T3:U1171">2</span></span></span> + <span class="mxinfo " id="T3:U1172"><span class="var type1" id="S47T3U1511">numOfFpp</span> * <span class="mxinfo " id="T3:U1174">2</span></span></span> + <span class="var type1" id="S51T3U1513">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1176">cos(<span class="mxinfo " id="T3:U1177"><span class="mxinfo " id="T25:U1178"><span class="var type1" id="S2T4U1518">thruster_data</span>(<span class="var type1" id="S30T3U1519">j</span>)</span>.phi</span>)</span></span>;<span class="comment">%(3.16a)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,209" id="srcline209">209</a></span><span class="line">                        <span class="mxinfo " id="T3:U1181"><span class="mxinfo " id="T3:U1182"><span class="var type1" id="S7T1U1524">b</span>(<span class="mxinfo " id="T3:U1184"><span class="var type1" id="S48T3U1526">pos_A</span> + <span class="mxinfo " id="T3:U1186">2</span></span>)</span> = <span class="mxinfo " id="T3:U1187"><span class="mxinfo " id="T25:U1188"><span class="var type1" id="S2T4U1530">thruster_data</span>(<span class="var type1" id="S30T3U1531">j</span>)</span>.T_</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,210" id="srcline210">210</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,211" id="srcline211">211</a></span><span class="line">                        <span class="mxinfo " id="T3:U1191"><span class="mxinfo " id="T3:U1192"><span class="var type1" id="S6T18U1536">A</span>(<span class="mxinfo " id="T3:U1194"><span class="var type1" id="S48T3U1538">pos_A</span> + <span class="mxinfo " id="T3:U1196">3</span></span>,<span class="mxinfo " id="T3:U1197"><span class="mxinfo " id="T3:U1198"><span class="mxinfo " id="T3:U1199"><span class="mxinfo " id="T3:U1200"><span class="var type1" id="S46T3U1544">numOfAzi</span> * <span class="mxinfo " id="T3:U1202">2</span></span> + <span class="mxinfo " id="T3:U1203"><span class="var type1" id="S45T3U1547">numOfTunnel</span> * <span class="mxinfo " id="T3:U1205">2</span></span></span> + <span class="mxinfo " id="T3:U1206"><span class="var type1" id="S47T3U1550">numOfFpp</span> * <span class="mxinfo " id="T3:U1208">2</span></span></span> + <span class="var type1" id="S51T3U1552">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1210">-<span class="mxinfo " id="T3:U1211">cos(<span class="mxinfo " id="T3:U1212"><span class="mxinfo " id="T25:U1213"><span class="var type1" id="S2T4U1558">thruster_data</span>(<span class="var type1" id="S30T3U1559">j</span>)</span>.phi_</span>)</span></span></span>;<span class="comment">%(3.16b)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,212" id="srcline212">212</a></span><span class="line">                        <span class="mxinfo " id="T3:U1216"><span class="mxinfo " id="T3:U1217"><span class="var type1" id="S7T1U1564">b</span>(<span class="mxinfo " id="T3:U1219"><span class="var type1" id="S48T3U1566">pos_A</span> + <span class="mxinfo " id="T3:U1221">3</span></span>)</span> = <span class="mxinfo " id="T3:U1222"><span class="mxinfo " id="T3:U1223">-<span class="mxinfo " id="T3:U1224">cos(<span class="mxinfo " id="T3:U1225"><span class="mxinfo " id="T3:U1226"><span class="mxinfo " id="T25:U1227"><span class="var type1" id="S2T4U1575">thruster_data</span>(<span class="var type1" id="S30T3U1576">j</span>)</span>.phi_</span> - <span class="mxinfo " id="T3:U1230"><span class="mxinfo " id="T25:U1231"><span class="var type1" id="S2T4U1580">thruster_data</span>(<span class="var type1" id="S30T3U1581">j</span>)</span>.phi</span></span>)</span></span> * <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,213" id="srcline213">213</a></span><span class="line">                            <span class="mxinfo " id="T3:U1234"><span class="mxinfo " id="T25:U1235"><span class="var type1" id="S2T4U1585">thruster_data</span>(<span class="var type1" id="S30T3U1586">j</span>)</span>.Tplus</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,214" id="srcline214">214</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,215" id="srcline215">215</a></span><span class="line">                        <span class="mxinfo " id="T3:U1238"><span class="mxinfo " id="T3:U1239"><span class="var type1" id="S6T18U1591">A</span>(<span class="mxinfo " id="T3:U1241"><span class="var type1" id="S48T3U1593">pos_A</span> + <span class="mxinfo " id="T3:U1243">4</span></span>,<span class="mxinfo " id="T3:U1244"><span class="mxinfo " id="T3:U1245"><span class="mxinfo " id="T3:U1246"><span class="mxinfo " id="T3:U1247"><span class="var type1" id="S46T3U1599">numOfAzi</span> * <span class="mxinfo " id="T3:U1249">2</span></span> + <span class="mxinfo " id="T3:U1250"><span class="var type1" id="S45T3U1602">numOfTunnel</span> * <span class="mxinfo " id="T3:U1252">2</span></span></span> + <span class="mxinfo " id="T3:U1253"><span class="var type1" id="S47T3U1605">numOfFpp</span> * <span class="mxinfo " id="T3:U1255">2</span></span></span> + <span class="var type1" id="S51T3U1607">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1257">-<span class="mxinfo " id="T3:U1258">cos(<span class="mxinfo " id="T3:U1259"><span class="mxinfo " id="T25:U1260"><span class="var type1" id="S2T4U1613">thruster_data</span>(<span class="var type1" id="S30T3U1614">j</span>)</span>.phiPlus</span>)</span></span></span>;<span class="comment">%(3.16c)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,216" id="srcline216">216</a></span><span class="line">                        <span class="mxinfo " id="T3:U1263"><span class="mxinfo " id="T3:U1264"><span class="var type1" id="S7T1U1619">b</span>(<span class="mxinfo " id="T3:U1266"><span class="var type1" id="S48T3U1621">pos_A</span> + <span class="mxinfo " id="T3:U1268">4</span></span>)</span> = <span class="mxinfo " id="T3:U1269"><span class="mxinfo " id="T3:U1270">-<span class="mxinfo " id="T3:U1271">cos(<span class="mxinfo " id="T3:U1272"><span class="mxinfo " id="T3:U1273"><span class="mxinfo " id="T25:U1274"><span class="var type1" id="S2T4U1630">thruster_data</span>(<span class="var type1" id="S30T3U1631">j</span>)</span>.phiPlus</span> - <span class="mxinfo " id="T3:U1277"><span class="mxinfo " id="T25:U1278"><span class="var type1" id="S2T4U1635">thruster_data</span>(<span class="var type1" id="S30T3U1636">j</span>)</span>.phi</span></span>)</span></span> * <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,217" id="srcline217">217</a></span><span class="line">                            <span class="mxinfo " id="T3:U1281"><span class="mxinfo " id="T25:U1282"><span class="var type1" id="S2T4U1640">thruster_data</span>(<span class="var type1" id="S30T3U1641">j</span>)</span>.Tplus</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,218" id="srcline218">218</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,219" id="srcline219">219</a></span><span class="line">                        <span class="keyword">for</span> <span class="var type1" id="S52T3U1645">i_Azi</span> = <span class="mxinfo " id="T83:U1286"><span class="mxinfo " id="T3:U1287">1</span>:<span class="var type1" id="S27T3U1648">NA_azi</span></span><span class="comment">%linearized thrust zone</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,220" id="srcline220">220</a></span><span class="line">                            <span class="mxinfo " id="T3:U1289"><span class="mxinfo " id="T3:U1290"><span class="var type1" id="S6T18U1652">A</span>(<span class="mxinfo " id="T3:U1292"><span class="mxinfo " id="T3:U1293"><span class="var type1" id="S48T3U1655">pos_A</span> + <span class="mxinfo " id="T3:U1295">4</span></span> + <span class="var type1" id="S52T3U1657">i_Azi</span></span>,<span class="mxinfo " id="T3:U1297"><span class="mxinfo " id="T3:U1298"><span class="mxinfo " id="T3:U1299"><span class="mxinfo " id="T3:U1300"><span class="var type1" id="S46T3U1662">numOfAzi</span> * <span class="mxinfo " id="T3:U1302">2</span></span> + <span class="mxinfo " id="T3:U1303"><span class="var type1" id="S45T3U1665">numOfTunnel</span> * <span class="mxinfo " id="T3:U1305">2</span></span></span> + <span class="mxinfo " id="T3:U1306"><span class="var type1" id="S47T3U1668">numOfFpp</span> * <span class="mxinfo " id="T3:U1308">2</span></span></span> + <span class="var type1" id="S51T3U1670">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1310"><span class="var type1" id="S26T82U1672">A_azi</span>(<span class="var type1" id="S52T3U1673">i_Azi</span>,<span class="var type1" id="S51T3U1674">ixy</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,221" id="srcline221">221</a></span><span class="line">                            <span class="mxinfo " id="T3:U1314"><span class="mxinfo " id="T3:U1315"><span class="var type1" id="S7T1U1678">b</span>(<span class="mxinfo " id="T3:U1317"><span class="mxinfo " id="T3:U1318"><span class="var type1" id="S48T3U1681">pos_A</span> + <span class="mxinfo " id="T3:U1320">4</span></span> + <span class="var type1" id="S52T3U1683">i_Azi</span></span>)</span> = <span class="mxinfo " id="T3:U1322"><span class="mxinfo " id="T3:U1323">- <span class="mxinfo " id="T3:U1324"><span class="mxinfo " id="T25:U1325"><span class="var type1" id="S2T4U1688">thruster_data</span>(<span class="var type1" id="S30T3U1689">j</span>)</span>.Tmax</span></span> * <span class="mxinfo " id="T3:U1328">cos(<span class="mxinfo " id="T3:U1329">pi / <span class="var type1" id="S27T3U1696">NA_azi</span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,222" id="srcline222">222</a></span><span class="line">                        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,223" id="srcline223">223</a></span><span class="line">                    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,224" id="srcline224">224</a></span><span class="line">                        <span class="keyword">for</span> <span class="var type1" id="S52T3U1700">i_Azi</span> = <span class="mxinfo " id="T83:U1332"><span class="mxinfo " id="T3:U1333">1</span>:<span class="var type1" id="S27T3U1703">NA_azi</span></span><span class="comment">%linearized thrust zone</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,225" id="srcline225">225</a></span><span class="line">                            <span class="mxinfo " id="T3:U1335"><span class="mxinfo " id="T3:U1336"><span class="var type1" id="S6T18U1707">A</span>(<span class="mxinfo " id="T3:U1338"><span class="mxinfo " id="T3:U1339"><span class="var type1" id="S48T3U1710">pos_A</span> - <span class="mxinfo " id="T3:U1341">1</span></span> + <span class="var type1" id="S52T3U1712">i_Azi</span></span>,<span class="mxinfo " id="T3:U1343"><span class="mxinfo " id="T3:U1344"><span class="mxinfo " id="T3:U1345"><span class="mxinfo " id="T3:U1346"><span class="var type1" id="S46T3U1717">numOfAzi</span> * <span class="mxinfo " id="T3:U1348">2</span></span> + <span class="mxinfo " id="T3:U1349"><span class="var type1" id="S45T3U1720">numOfTunnel</span> * <span class="mxinfo " id="T3:U1351">2</span></span></span> + <span class="mxinfo " id="T3:U1352"><span class="var type1" id="S47T3U1723">numOfFpp</span> * <span class="mxinfo " id="T3:U1354">2</span></span></span> + <span class="var type1" id="S51T3U1725">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1356"><span class="var type1" id="S26T82U1727">A_azi</span>(<span class="var type1" id="S52T3U1728">i_Azi</span>,<span class="var type1" id="S51T3U1729">ixy</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,226" id="srcline226">226</a></span><span class="line">                            <span class="mxinfo " id="T3:U1360"><span class="mxinfo " id="T3:U1361"><span class="var type1" id="S7T1U1733">b</span>(<span class="mxinfo " id="T3:U1363"><span class="mxinfo " id="T3:U1364"><span class="var type1" id="S48T3U1736">pos_A</span> - <span class="mxinfo " id="T3:U1366">1</span></span> + <span class="var type1" id="S52T3U1738">i_Azi</span></span>)</span> = <span class="mxinfo " id="T3:U1368"><span class="mxinfo " id="T3:U1369">- <span class="mxinfo " id="T3:U1370"><span class="mxinfo " id="T25:U1371"><span class="var type1" id="S2T4U1743">thruster_data</span>(<span class="var type1" id="S30T3U1744">j</span>)</span>.Tmax</span></span> * <span class="mxinfo " id="T3:U1374">cos(<span class="mxinfo " id="T3:U1375">pi / <span class="var type1" id="S27T3U1751">NA_azi</span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,227" id="srcline227">227</a></span><span class="line">                        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,228" id="srcline228">228</a></span><span class="line">                    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,229" id="srcline229">229</a></span><span class="line">                    </span></span>
<span class="srcline"><span class="lineno"><a href="81,230" id="srcline230">230</a></span><span class="line">                <span class="keyword">elseif</span> <span class="mxinfo " id="T11:U1377"><span class="var type1" id="S51T3U1754">ixy</span> == <span class="mxinfo " id="T3:U1379">2</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,231" id="srcline231">231</a></span><span class="line">                    <span class="keyword">if</span> <span class="mxinfo " id="T11:U1380"><span class="var type1" id="S17T3U1759">no_azi_angle_constr</span> == <span class="mxinfo " id="T3:U1382">0</span></span> <span class="comment">% there is angle constraint</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,232" id="srcline232">232</a></span><span class="line">                        <span class="mxinfo " id="T3:U1383"><span class="mxinfo " id="T3:U1384"><span class="var type1" id="S6T18U1764">A</span>(<span class="var type1" id="S48T3U1765">pos_A</span>,<span class="mxinfo " id="T3:U1387"><span class="mxinfo " id="T3:U1388"><span class="mxinfo " id="T3:U1389"><span class="mxinfo " id="T3:U1390"><span class="var type1" id="S46T3U1770">numOfAzi</span> * <span class="mxinfo " id="T3:U1392">2</span></span> + <span class="mxinfo " id="T3:U1393"><span class="var type1" id="S45T3U1773">numOfTunnel</span> * <span class="mxinfo " id="T3:U1395">2</span></span></span> + <span class="mxinfo " id="T3:U1396"><span class="var type1" id="S47T3U1776">numOfFpp</span> * <span class="mxinfo " id="T3:U1398">2</span></span></span> + <span class="var type1" id="S51T3U1778">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1400">cos(<span class="mxinfo " id="T3:U1401"><span class="mxinfo " id="T25:U1402"><span class="var type1" id="S2T4U1783">thruster_data</span>(<span class="var type1" id="S30T3U1784">j</span>)</span>.phi_</span>)</span></span>;<span class="comment">%(3.15a)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,233" id="srcline233">233</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,234" id="srcline234">234</a></span><span class="line">                        <span class="mxinfo " id="T3:U1405"><span class="mxinfo " id="T3:U1406"><span class="var type1" id="S6T18U1789">A</span>(<span class="mxinfo " id="T3:U1408"><span class="var type1" id="S48T3U1791">pos_A</span> + <span class="mxinfo " id="T3:U1410">1</span></span>,<span class="mxinfo " id="T3:U1411"><span class="mxinfo " id="T3:U1412"><span class="mxinfo " id="T3:U1413"><span class="mxinfo " id="T3:U1414"><span class="var type1" id="S46T3U1797">numOfAzi</span> * <span class="mxinfo " id="T3:U1416">2</span></span> + <span class="mxinfo " id="T3:U1417"><span class="var type1" id="S45T3U1800">numOfTunnel</span> * <span class="mxinfo " id="T3:U1419">2</span></span></span> + <span class="mxinfo " id="T3:U1420"><span class="var type1" id="S47T3U1803">numOfFpp</span> * <span class="mxinfo " id="T3:U1422">2</span></span></span> + <span class="var type1" id="S51T3U1805">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1424">-<span class="mxinfo " id="T3:U1425">cos(<span class="mxinfo " id="T3:U1426"><span class="mxinfo " id="T25:U1427"><span class="var type1" id="S2T4U1811">thruster_data</span>(<span class="var type1" id="S30T3U1812">j</span>)</span>.phiPlus</span>)</span></span></span>;<span class="comment">%(3.15b)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,235" id="srcline235">235</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,236" id="srcline236">236</a></span><span class="line">                        <span class="mxinfo " id="T3:U1430"><span class="mxinfo " id="T3:U1431"><span class="var type1" id="S6T18U1817">A</span>(<span class="mxinfo " id="T3:U1433"><span class="var type1" id="S48T3U1819">pos_A</span> + <span class="mxinfo " id="T3:U1435">2</span></span>,<span class="mxinfo " id="T3:U1436"><span class="mxinfo " id="T3:U1437"><span class="mxinfo " id="T3:U1438"><span class="mxinfo " id="T3:U1439"><span class="var type1" id="S46T3U1825">numOfAzi</span> * <span class="mxinfo " id="T3:U1441">2</span></span> + <span class="mxinfo " id="T3:U1442"><span class="var type1" id="S45T3U1828">numOfTunnel</span> * <span class="mxinfo " id="T3:U1444">2</span></span></span> + <span class="mxinfo " id="T3:U1445"><span class="var type1" id="S47T3U1831">numOfFpp</span> * <span class="mxinfo " id="T3:U1447">2</span></span></span> + <span class="var type1" id="S51T3U1833">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1449">sin(<span class="mxinfo " id="T3:U1450"><span class="mxinfo " id="T25:U1451"><span class="var type1" id="S2T4U1838">thruster_data</span>(<span class="var type1" id="S30T3U1839">j</span>)</span>.phi</span>)</span></span>;<span class="comment">%(3.16a)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,237" id="srcline237">237</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,238" id="srcline238">238</a></span><span class="line">                        <span class="mxinfo " id="T3:U1454"><span class="mxinfo " id="T3:U1455"><span class="var type1" id="S6T18U1844">A</span>(<span class="mxinfo " id="T3:U1457"><span class="var type1" id="S48T3U1846">pos_A</span> + <span class="mxinfo " id="T3:U1459">3</span></span>,<span class="mxinfo " id="T3:U1460"><span class="mxinfo " id="T3:U1461"><span class="mxinfo " id="T3:U1462"><span class="mxinfo " id="T3:U1463"><span class="var type1" id="S46T3U1852">numOfAzi</span> * <span class="mxinfo " id="T3:U1465">2</span></span> + <span class="mxinfo " id="T3:U1466"><span class="var type1" id="S45T3U1855">numOfTunnel</span> * <span class="mxinfo " id="T3:U1468">2</span></span></span> + <span class="mxinfo " id="T3:U1469"><span class="var type1" id="S47T3U1858">numOfFpp</span> * <span class="mxinfo " id="T3:U1471">2</span></span></span> + <span class="var type1" id="S51T3U1860">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1473">-<span class="mxinfo " id="T3:U1474">sin(<span class="mxinfo " id="T3:U1475"><span class="mxinfo " id="T25:U1476"><span class="var type1" id="S2T4U1866">thruster_data</span>(<span class="var type1" id="S30T3U1867">j</span>)</span>.phi_</span>)</span></span></span>;<span class="comment">%(3.16b)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,239" id="srcline239">239</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,240" id="srcline240">240</a></span><span class="line">                        <span class="mxinfo " id="T3:U1479"><span class="mxinfo " id="T3:U1480"><span class="var type1" id="S6T18U1872">A</span>(<span class="mxinfo " id="T3:U1482"><span class="var type1" id="S48T3U1874">pos_A</span> + <span class="mxinfo " id="T3:U1484">4</span></span>,<span class="mxinfo " id="T3:U1485"><span class="mxinfo " id="T3:U1486"><span class="mxinfo " id="T3:U1487"><span class="mxinfo " id="T3:U1488"><span class="var type1" id="S46T3U1880">numOfAzi</span> * <span class="mxinfo " id="T3:U1490">2</span></span> + <span class="mxinfo " id="T3:U1491"><span class="var type1" id="S45T3U1883">numOfTunnel</span> * <span class="mxinfo " id="T3:U1493">2</span></span></span> + <span class="mxinfo " id="T3:U1494"><span class="var type1" id="S47T3U1886">numOfFpp</span> * <span class="mxinfo " id="T3:U1496">2</span></span></span> + <span class="var type1" id="S51T3U1888">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1498">-<span class="mxinfo " id="T3:U1499">sin(<span class="mxinfo " id="T3:U1500"><span class="mxinfo " id="T25:U1501"><span class="var type1" id="S2T4U1894">thruster_data</span>(<span class="var type1" id="S30T3U1895">j</span>)</span>.phiPlus</span>)</span></span></span>;<span class="comment">%(3.16c)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,241" id="srcline241">241</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,242" id="srcline242">242</a></span><span class="line">                        <span class="keyword">for</span> <span class="var type1" id="S52T3U1899">i_Azi</span> = <span class="mxinfo " id="T83:U1505"><span class="mxinfo " id="T3:U1506">1</span>:<span class="var type1" id="S27T3U1902">NA_azi</span></span><span class="comment">%linearized thrust zone</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,243" id="srcline243">243</a></span><span class="line">                            <span class="mxinfo " id="T3:U1508"><span class="mxinfo " id="T3:U1509"><span class="var type1" id="S6T18U1906">A</span>(<span class="mxinfo " id="T3:U1511"><span class="mxinfo " id="T3:U1512"><span class="var type1" id="S48T3U1909">pos_A</span> + <span class="mxinfo " id="T3:U1514">4</span></span> + <span class="var type1" id="S52T3U1911">i_Azi</span></span>,<span class="mxinfo " id="T3:U1516"><span class="mxinfo " id="T3:U1517"><span class="mxinfo " id="T3:U1518"><span class="mxinfo " id="T3:U1519"><span class="var type1" id="S46T3U1916">numOfAzi</span> * <span class="mxinfo " id="T3:U1521">2</span></span> + <span class="mxinfo " id="T3:U1522"><span class="var type1" id="S45T3U1919">numOfTunnel</span> * <span class="mxinfo " id="T3:U1524">2</span></span></span> + <span class="mxinfo " id="T3:U1525"><span class="var type1" id="S47T3U1922">numOfFpp</span> * <span class="mxinfo " id="T3:U1527">2</span></span></span> + <span class="var type1" id="S51T3U1924">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1529"><span class="var type1" id="S26T82U1926">A_azi</span>(<span class="var type1" id="S52T3U1927">i_Azi</span>,<span class="var type1" id="S51T3U1928">ixy</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,244" id="srcline244">244</a></span><span class="line">                        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,245" id="srcline245">245</a></span><span class="line">                    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,246" id="srcline246">246</a></span><span class="line">                        <span class="keyword">for</span> <span class="var type1" id="S52T3U1932">i_Azi</span> = <span class="mxinfo " id="T83:U1534"><span class="mxinfo " id="T3:U1535">1</span>:<span class="var type1" id="S27T3U1935">NA_azi</span></span><span class="comment">%linearized thrust zone</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,247" id="srcline247">247</a></span><span class="line">                            <span class="mxinfo " id="T3:U1537"><span class="mxinfo " id="T3:U1538"><span class="var type1" id="S6T18U1939">A</span>(<span class="mxinfo " id="T3:U1540"><span class="mxinfo " id="T3:U1541"><span class="var type1" id="S48T3U1942">pos_A</span> - <span class="mxinfo " id="T3:U1543">1</span></span> + <span class="var type1" id="S52T3U1944">i_Azi</span></span>,<span class="mxinfo " id="T3:U1545"><span class="mxinfo " id="T3:U1546"><span class="mxinfo " id="T3:U1547"><span class="mxinfo " id="T3:U1548"><span class="var type1" id="S46T3U1949">numOfAzi</span> * <span class="mxinfo " id="T3:U1550">2</span></span> + <span class="mxinfo " id="T3:U1551"><span class="var type1" id="S45T3U1952">numOfTunnel</span> * <span class="mxinfo " id="T3:U1553">2</span></span></span> + <span class="mxinfo " id="T3:U1554"><span class="var type1" id="S47T3U1955">numOfFpp</span> * <span class="mxinfo " id="T3:U1556">2</span></span></span> + <span class="var type1" id="S51T3U1957">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1558"><span class="var type1" id="S26T82U1959">A_azi</span>(<span class="var type1" id="S52T3U1960">i_Azi</span>,<span class="var type1" id="S51T3U1961">ixy</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,248" id="srcline248">248</a></span><span class="line">                        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,249" id="srcline249">249</a></span><span class="line">                    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,250" id="srcline250">250</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,251" id="srcline251">251</a></span><span class="line">                </span></span>
<span class="srcline"><span class="lineno"><a href="81,252" id="srcline252">252</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,253" id="srcline253">253</a></span><span class="line">            <span class="comment">%             check_rudder_constr(thruster_data(j).Tmax*[-1 -1;-1 1;1 1;1 -1],A(pos_A:pos_A + 4, <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,254" id="srcline254">254</a></span><span class="line">            <span class="comment">%                 numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 1:numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 2), <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,255" id="srcline255">255</a></span><span class="line">            <span class="comment">%                 b(pos_A:pos_A + 4));%azi</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,256" id="srcline256">256</a></span><span class="line">            <span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,257" id="srcline257">257</a></span><span class="line">            <span class="comment">%                     check_rudder_constr(thruster_data(j).Tmax*[-1 -1;-1 1;1 1;1 -1],A(pos_A + 4 + 1:pos_A + 4 + i_Azi, <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,258" id="srcline258">258</a></span><span class="line">            <span class="comment">%                         numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 1:numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 2), <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,259" id="srcline259">259</a></span><span class="line">            <span class="comment">%                         b(pos_A + 4 + 1:pos_A + 4 + i_Azi));</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,260" id="srcline260">260</a></span><span class="line">            <span class="comment">%         check_rudder_constr(thruster_data(j).Tmax*[-1 -1;-1 1;1 1;1 -1],A(pos_A:pos_A + 4 + i_Azi, <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,261" id="srcline261">261</a></span><span class="line">            <span class="comment">%             numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 1:numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 2), <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,262" id="srcline262">262</a></span><span class="line">            <span class="comment">%             b(pos_A:pos_A + 4 + i_Azi));</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,263" id="srcline263">263</a></span><span class="line">            <span class="keyword">if</span> <span class="mxinfo " id="T11:U1562"><span class="var type1" id="S17T3U1965">no_azi_angle_constr</span> == <span class="mxinfo " id="T3:U1564">0</span></span> <span class="comment">% there is angle constraint</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,264" id="srcline264">264</a></span><span class="line">                <span class="mxinfo " id="T3:U1565"><span class="var type1" id="S48T3U1969">pos_A</span> = <span class="mxinfo " id="T3:U1567"><span class="mxinfo " id="T3:U1568"><span class="var type1" id="S48T3U1972">pos_A</span> + <span class="mxinfo " id="T3:U1570">5</span></span> + <span class="var type1" id="S27T3U1974">NA_azi</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,265" id="srcline265">265</a></span><span class="line">            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,266" id="srcline266">266</a></span><span class="line">                <span class="mxinfo " id="T3:U1572"><span class="var type1" id="S48T3U1978">pos_A</span> = <span class="mxinfo " id="T3:U1574"><span class="var type1" id="S48T3U1980">pos_A</span> + <span class="var type1" id="S27T3U1981">NA_azi</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,267" id="srcline267">267</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,268" id="srcline268">268</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,269" id="srcline269">269</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,270" id="srcline270">270</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,271" id="srcline271">271</a></span><span class="line">            <span class="mxinfo " id="T3:U1577"><span class="var type1" id="S46T3U1984">numOfAzi</span> = <span class="mxinfo " id="T3:U1579"><span class="var type1" id="S46T3U1986">numOfAzi</span> + <span class="mxinfo " id="T3:U1581">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,272" id="srcline272">272</a></span><span class="line">        <span class="keyword">case</span> <span class="mxinfo " id="T3:U1582">2</span> <span class="comment">%fpp</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,273" id="srcline273">273</a></span><span class="line">            <span class="mxinfo " id="T3:U1583">[<span class="var type1" id="S54T84U1993">A_fpp</span>,<span class="var type1" id="S55T85U1994">b_fpp</span>,<span class="mxinfo " id="T3:U1586">~</span>] = <span class="fcn" id="F293N14:B1997">N_sided_rudder</span>(<span class="mxinfo " id="T86:U1587"><span class="mxinfo " id="T3:U1588"><span class="mxinfo " id="T25:U1589"><span class="var type1" id="S2T4U2001">thruster_data</span>(<span class="var type1" id="S30T3U2002">j</span>)</span>.Tmax</span> * <span class="mxinfo " id="T86:U1592"><span class="var type1" id="S14T9U2005">rudder_table</span>(<span class="mxinfo " id="T13:U1594">:</span>,<span class="mxinfo " id="T15:U1595">2:3</span>)</span></span>)</span>;<span class="comment">%x,y</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,274" id="srcline274">274</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,275" id="srcline275">275</a></span><span class="line">            <span class="mxinfo " id="T3:U1596"><span class="mxinfo " id="T3:U1597"><span class="var type1" id="S4T18U2013">H</span>(<span class="var type1" id="S44T3U2014">i_H</span>,<span class="var type1" id="S44T3U2015">i_H</span>)</span> = <span class="mxinfo " id="T3:U1601"><span class="mxinfo " id="T5:U1602"><span class="mxinfo " id="T25:U1603"><span class="var type1" id="S2T4U2019">thruster_data</span>(<span class="var type1" id="S30T3U2020">j</span>)</span>.weight</span>(<span class="mxinfo " id="T3:U1606">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,276" id="srcline276">276</a></span><span class="line">            <span class="mxinfo " id="T3:U1607"><span class="mxinfo " id="T3:U1608"><span class="var type1" id="S4T18U2026">H</span>(<span class="mxinfo " id="T3:U1610"><span class="var type1" id="S44T3U2028">i_H</span> + <span class="mxinfo " id="T3:U1612">1</span></span>,<span class="mxinfo " id="T3:U1613"><span class="var type1" id="S44T3U2031">i_H</span> + <span class="mxinfo " id="T3:U1615">1</span></span>)</span> = <span class="mxinfo " id="T3:U1616"><span class="mxinfo " id="T5:U1617"><span class="mxinfo " id="T25:U1618"><span class="var type1" id="S2T4U2036">thruster_data</span>(<span class="var type1" id="S30T3U2037">j</span>)</span>.weight</span>(<span class="mxinfo " id="T3:U1621">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,277" id="srcline277">277</a></span><span class="line">            <span class="mxinfo " id="T3:U1622"><span class="var type1" id="S44T3U2042">i_H</span> = <span class="mxinfo " id="T3:U1624"><span class="var type1" id="S44T3U2044">i_H</span> + <span class="mxinfo " id="T3:U1626">2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,278" id="srcline278">278</a></span><span class="line">            <span class="keyword">for</span> <span class="var type1" id="S51T3U2048">ixy</span> =<span class="mxinfo " id="T48:U1628"><span class="mxinfo " id="T3:U1629">1</span>:2</span> <span class="comment">% xthurst and ythrust</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,279" id="srcline279">279</a></span><span class="line">                <span class="keyword">for</span> <span class="var type1" id="S50T3U2054">i</span> = <span class="mxinfo " id="T6:U1631"><span class="mxinfo " id="T3:U1632">1</span>:3</span> <span class="comment">%R1 R2 R3</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,280" id="srcline280">280</a></span><span class="line">                    <span class="keyword">if</span> <span class="mxinfo " id="T11:U1633"><span class="var type1" id="S51T3U2061">ixy</span> == <span class="mxinfo " id="T3:U1635">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,281" id="srcline281">281</a></span><span class="line">                        <span class="keyword">switch</span> <span class="var type1" id="S50T3U2064">i</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,282" id="srcline282">282</a></span><span class="line">                            <span class="keyword">case</span> <span class="mxinfo " id="T3:U1637">1</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,283" id="srcline283">283</a></span><span class="line">                                <span class="mxinfo " id="T3:U1638"><span class="mxinfo " id="T3:U1639"><span class="var type1" id="S8T18U2070">Aeq</span>(<span class="var type1" id="S50T3U2071">i</span>,<span class="mxinfo " id="T3:U1642"><span class="mxinfo " id="T3:U1643"><span class="mxinfo " id="T3:U1644"><span class="mxinfo " id="T3:U1645"><span class="var type1" id="S46T3U2076">numOfAzi</span> * <span class="mxinfo " id="T3:U1647">2</span></span> + <span class="mxinfo " id="T3:U1648"><span class="var type1" id="S45T3U2079">numOfTunnel</span> * <span class="mxinfo " id="T3:U1650">2</span></span></span> + <span class="mxinfo " id="T3:U1651"><span class="var type1" id="S47T3U2082">numOfFpp</span> * <span class="mxinfo " id="T3:U1653">2</span></span></span> + <span class="var type1" id="S51T3U2084">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1655">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,284" id="srcline284">284</a></span><span class="line">                            <span class="keyword">case</span> <span class="mxinfo " id="T3:U1656">2</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,285" id="srcline285">285</a></span><span class="line">                                <span class="mxinfo " id="T3:U1657"><span class="mxinfo " id="T3:U1658"><span class="var type1" id="S8T18U2091">Aeq</span>(<span class="var type1" id="S50T3U2092">i</span>,<span class="mxinfo " id="T3:U1661"><span class="mxinfo " id="T3:U1662"><span class="mxinfo " id="T3:U1663"><span class="mxinfo " id="T3:U1664"><span class="var type1" id="S46T3U2097">numOfAzi</span> * <span class="mxinfo " id="T3:U1666">2</span></span> + <span class="mxinfo " id="T3:U1667"><span class="var type1" id="S45T3U2100">numOfTunnel</span> * <span class="mxinfo " id="T3:U1669">2</span></span></span> + <span class="mxinfo " id="T3:U1670"><span class="var type1" id="S47T3U2103">numOfFpp</span> * <span class="mxinfo " id="T3:U1672">2</span></span></span> + <span class="var type1" id="S51T3U2105">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1674">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,286" id="srcline286">286</a></span><span class="line">                            <span class="keyword">case</span> <span class="mxinfo " id="T3:U1675">3</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,287" id="srcline287">287</a></span><span class="line">                                <span class="mxinfo " id="T3:U1676"><span class="mxinfo " id="T3:U1677"><span class="var type1" id="S8T18U2112">Aeq</span>(<span class="var type1" id="S50T3U2113">i</span>,<span class="mxinfo " id="T3:U1680"><span class="mxinfo " id="T3:U1681"><span class="mxinfo " id="T3:U1682"><span class="mxinfo " id="T3:U1683"><span class="var type1" id="S46T3U2118">numOfAzi</span> * <span class="mxinfo " id="T3:U1685">2</span></span> + <span class="mxinfo " id="T3:U1686"><span class="var type1" id="S45T3U2121">numOfTunnel</span> * <span class="mxinfo " id="T3:U1688">2</span></span></span> + <span class="mxinfo " id="T3:U1689"><span class="var type1" id="S47T3U2124">numOfFpp</span> * <span class="mxinfo " id="T3:U1691">2</span></span></span> + <span class="var type1" id="S51T3U2126">ixy</span></span>)</span> = <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,288" id="srcline288">288</a></span><span class="line">                                    <span class="mxinfo " id="T3:U1693"><span class="mxinfo " id="T3:U1694">- <span class="mxinfo " id="T3:U1695"><span class="mxinfo " id="T25:U1696"><span class="var type1" id="S2T4U2131">thruster_data</span>(<span class="var type1" id="S30T3U2132">j</span>)</span>.y</span></span> + <span class="mxinfo " id="T3:U1699"><span class="mxinfo " id="T25:U1700"><span class="var type1" id="S2T4U2136">thruster_data</span>(<span class="var type1" id="S30T3U2137">j</span>)</span>.y0</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,289" id="srcline289">289</a></span><span class="line">                                </span></span>
<span class="srcline"><span class="lineno"><a href="81,290" id="srcline290">290</a></span><span class="line">                        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,291" id="srcline291">291</a></span><span class="line">                        </span></span>
<span class="srcline"><span class="lineno"><a href="81,292" id="srcline292">292</a></span><span class="line">                    <span class="keyword">elseif</span> <span class="mxinfo " id="T11:U1703"><span class="var type1" id="S51T3U2141">ixy</span> ==<span class="mxinfo " id="T3:U1705">2</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,293" id="srcline293">293</a></span><span class="line">                        <span class="keyword">switch</span> <span class="var type1" id="S50T3U2144">i</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,294" id="srcline294">294</a></span><span class="line">                            <span class="keyword">case</span> <span class="mxinfo " id="T3:U1707">1</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,295" id="srcline295">295</a></span><span class="line">                                <span class="mxinfo " id="T3:U1708"><span class="mxinfo " id="T3:U1709"><span class="var type1" id="S8T18U2150">Aeq</span>(<span class="var type1" id="S50T3U2151">i</span>,<span class="mxinfo " id="T3:U1712"><span class="mxinfo " id="T3:U1713"><span class="mxinfo " id="T3:U1714"><span class="mxinfo " id="T3:U1715"><span class="var type1" id="S46T3U2156">numOfAzi</span> * <span class="mxinfo " id="T3:U1717">2</span></span> + <span class="mxinfo " id="T3:U1718"><span class="var type1" id="S45T3U2159">numOfTunnel</span> * <span class="mxinfo " id="T3:U1720">2</span></span></span> + <span class="mxinfo " id="T3:U1721"><span class="var type1" id="S47T3U2162">numOfFpp</span> * <span class="mxinfo " id="T3:U1723">2</span></span></span> + <span class="var type1" id="S51T3U2164">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1725">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,296" id="srcline296">296</a></span><span class="line">                            <span class="keyword">case</span> <span class="mxinfo " id="T3:U1726">2</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,297" id="srcline297">297</a></span><span class="line">                                <span class="mxinfo " id="T3:U1727"><span class="mxinfo " id="T3:U1728"><span class="var type1" id="S8T18U2171">Aeq</span>(<span class="var type1" id="S50T3U2172">i</span>,<span class="mxinfo " id="T3:U1731"><span class="mxinfo " id="T3:U1732"><span class="mxinfo " id="T3:U1733"><span class="mxinfo " id="T3:U1734"><span class="var type1" id="S46T3U2177">numOfAzi</span> * <span class="mxinfo " id="T3:U1736">2</span></span> + <span class="mxinfo " id="T3:U1737"><span class="var type1" id="S45T3U2180">numOfTunnel</span> * <span class="mxinfo " id="T3:U1739">2</span></span></span> + <span class="mxinfo " id="T3:U1740"><span class="var type1" id="S47T3U2183">numOfFpp</span> * <span class="mxinfo " id="T3:U1742">2</span></span></span> + <span class="var type1" id="S51T3U2185">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1744">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,298" id="srcline298">298</a></span><span class="line">                            <span class="keyword">case</span> <span class="mxinfo " id="T3:U1745">3</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,299" id="srcline299">299</a></span><span class="line">                                <span class="mxinfo " id="T3:U1746"><span class="mxinfo " id="T3:U1747"><span class="var type1" id="S8T18U2192">Aeq</span>(<span class="var type1" id="S50T3U2193">i</span>,<span class="mxinfo " id="T3:U1750"><span class="mxinfo " id="T3:U1751"><span class="mxinfo " id="T3:U1752"><span class="mxinfo " id="T3:U1753"><span class="var type1" id="S46T3U2198">numOfAzi</span> * <span class="mxinfo " id="T3:U1755">2</span></span> + <span class="mxinfo " id="T3:U1756"><span class="var type1" id="S45T3U2201">numOfTunnel</span> * <span class="mxinfo " id="T3:U1758">2</span></span></span> + <span class="mxinfo " id="T3:U1759"><span class="var type1" id="S47T3U2204">numOfFpp</span> * <span class="mxinfo " id="T3:U1761">2</span></span></span> + <span class="var type1" id="S51T3U2206">ixy</span></span>)</span> = <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,300" id="srcline300">300</a></span><span class="line">                                    <span class="mxinfo " id="T3:U1763"><span class="mxinfo " id="T3:U1764"><span class="mxinfo " id="T25:U1765"><span class="var type1" id="S2T4U2210">thruster_data</span>(<span class="var type1" id="S30T3U2211">j</span>)</span>.x</span> - <span class="mxinfo " id="T3:U1768"><span class="mxinfo " id="T25:U1769"><span class="var type1" id="S2T4U2215">thruster_data</span>(<span class="var type1" id="S30T3U2216">j</span>)</span>.x0</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,301" id="srcline301">301</a></span><span class="line">                                </span></span>
<span class="srcline"><span class="lineno"><a href="81,302" id="srcline302">302</a></span><span class="line">                        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,303" id="srcline303">303</a></span><span class="line">                    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,304" id="srcline304">304</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,305" id="srcline305">305</a></span><span class="line">                </span></span>
<span class="srcline"><span class="lineno"><a href="81,306" id="srcline306">306</a></span><span class="line">                <span class="keyword">if</span> <span class="mxinfo " id="T11:U1772"><span class="var type1" id="S51T3U2221">ixy</span> == <span class="mxinfo " id="T3:U1774">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,307" id="srcline307">307</a></span><span class="line">                    <span class="mxinfo " id="T3:U1775"><span class="mxinfo " id="T3:U1776"><span class="var type1" id="S6T18U2226">A</span>(<span class="var type1" id="S48T3U2227">pos_A</span>,<span class="mxinfo " id="T3:U1779"><span class="mxinfo " id="T3:U1780"><span class="mxinfo " id="T3:U1781"><span class="mxinfo " id="T3:U1782"><span class="var type1" id="S46T3U2232">numOfAzi</span> * <span class="mxinfo " id="T3:U1784">2</span></span> + <span class="mxinfo " id="T3:U1785"><span class="var type1" id="S45T3U2235">numOfTunnel</span> * <span class="mxinfo " id="T3:U1787">2</span></span></span> + <span class="mxinfo " id="T3:U1788"><span class="var type1" id="S47T3U2238">numOfFpp</span> * <span class="mxinfo " id="T3:U1790">2</span></span></span> + <span class="var type1" id="S51T3U2240">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1792">-<span class="mxinfo " id="T3:U1793">sin(<span class="mxinfo " id="T3:U1794"><span class="mxinfo " id="T25:U1795"><span class="var type1" id="S2T4U2246">thruster_data</span>(<span class="var type1" id="S30T3U2247">j</span>)</span>.phi_</span>)</span></span></span>;<span class="comment">%(3.15a)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,308" id="srcline308">308</a></span><span class="line">                    <span class="mxinfo " id="T3:U1798"><span class="mxinfo " id="T3:U1799"><span class="var type1" id="S7T1U2252">b</span>(<span class="var type1" id="S48T3U2253">pos_A</span>)</span> = <span class="mxinfo " id="T3:U1802"><span class="mxinfo " id="T3:U1803"><span class="mxinfo " id="T3:U1804">-<span class="var type1" id="S24T3U2257">c2</span></span> * <span class="mxinfo " id="T3:U1806">abs(<span class="mxinfo " id="T3:U1807">cos(<span class="mxinfo " id="T3:U1808"><span class="mxinfo " id="T25:U1809"><span class="var type1" id="S2T4U2264">thruster_data</span>(<span class="var type1" id="S30T3U2265">j</span>)</span>.phi_</span>)</span>)</span></span> * <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,309" id="srcline309">309</a></span><span class="line">                        (<span class="mxinfo " id="T3:U1812"><span class="mxinfo " id="T3:U1813"><span class="mxinfo " id="T25:U1814"><span class="var type1" id="S2T4U2271">thruster_data</span>(<span class="var type1" id="S30T3U2272">j</span>)</span>.Tplus</span> - <span class="mxinfo " id="T3:U1817"><span class="mxinfo " id="T25:U1818"><span class="var type1" id="S2T4U2276">thruster_data</span>(<span class="var type1" id="S30T3U2277">j</span>)</span>.T_</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,310" id="srcline310">310</a></span><span class="line">                    </span></span>
<span class="srcline"><span class="lineno"><a href="81,311" id="srcline311">311</a></span><span class="line">                    <span class="mxinfo " id="T3:U1821"><span class="mxinfo " id="T3:U1822"><span class="var type1" id="S6T18U2282">A</span>(<span class="mxinfo " id="T3:U1824"><span class="var type1" id="S48T3U2284">pos_A</span> + <span class="mxinfo " id="T3:U1826">1</span></span>,<span class="mxinfo " id="T3:U1827"><span class="mxinfo " id="T3:U1828"><span class="mxinfo " id="T3:U1829"><span class="mxinfo " id="T3:U1830"><span class="var type1" id="S46T3U2290">numOfAzi</span> * <span class="mxinfo " id="T3:U1832">2</span></span> + <span class="mxinfo " id="T3:U1833"><span class="var type1" id="S45T3U2293">numOfTunnel</span> * <span class="mxinfo " id="T3:U1835">2</span></span></span> + <span class="mxinfo " id="T3:U1836"><span class="var type1" id="S47T3U2296">numOfFpp</span> * <span class="mxinfo " id="T3:U1838">2</span></span></span> + <span class="var type1" id="S51T3U2298">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1840">sin(<span class="mxinfo " id="T3:U1841"><span class="mxinfo " id="T25:U1842"><span class="var type1" id="S2T4U2303">thruster_data</span>(<span class="var type1" id="S30T3U2304">j</span>)</span>.phiPlus</span>)</span></span>;<span class="comment">%(3.15b)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,312" id="srcline312">312</a></span><span class="line">                    <span class="mxinfo " id="T3:U1845"><span class="mxinfo " id="T3:U1846"><span class="var type1" id="S7T1U2309">b</span>(<span class="mxinfo " id="T3:U1848"><span class="var type1" id="S48T3U2311">pos_A</span> + <span class="mxinfo " id="T3:U1850">1</span></span>)</span> = <span class="mxinfo " id="T3:U1851"><span class="mxinfo " id="T3:U1852"><span class="mxinfo " id="T3:U1853">-<span class="var type1" id="S24T3U2316">c2</span></span> * <span class="mxinfo " id="T3:U1855">abs(<span class="mxinfo " id="T3:U1856">cos(<span class="mxinfo " id="T3:U1857"><span class="mxinfo " id="T25:U1858"><span class="var type1" id="S2T4U2323">thruster_data</span>(<span class="var type1" id="S30T3U2324">j</span>)</span>.phiPlus</span>)</span>)</span></span> * <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,313" id="srcline313">313</a></span><span class="line">                        (<span class="mxinfo " id="T3:U1861"><span class="mxinfo " id="T3:U1862"><span class="mxinfo " id="T25:U1863"><span class="var type1" id="S2T4U2330">thruster_data</span>(<span class="var type1" id="S30T3U2331">j</span>)</span>.Tplus</span> - <span class="mxinfo " id="T3:U1866"><span class="mxinfo " id="T25:U1867"><span class="var type1" id="S2T4U2335">thruster_data</span>(<span class="var type1" id="S30T3U2336">j</span>)</span>.T_</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,314" id="srcline314">314</a></span><span class="line">                    </span></span>
<span class="srcline"><span class="lineno"><a href="81,315" id="srcline315">315</a></span><span class="line">                    <span class="mxinfo " id="T3:U1870"><span class="mxinfo " id="T3:U1871"><span class="var type1" id="S6T18U2341">A</span>(<span class="mxinfo " id="T3:U1873"><span class="var type1" id="S48T3U2343">pos_A</span> + <span class="mxinfo " id="T3:U1875">2</span></span>,<span class="mxinfo " id="T3:U1876"><span class="mxinfo " id="T3:U1877"><span class="mxinfo " id="T3:U1878"><span class="mxinfo " id="T3:U1879"><span class="var type1" id="S46T3U2349">numOfAzi</span> * <span class="mxinfo " id="T3:U1881">2</span></span> + <span class="mxinfo " id="T3:U1882"><span class="var type1" id="S45T3U2352">numOfTunnel</span> * <span class="mxinfo " id="T3:U1884">2</span></span></span> + <span class="mxinfo " id="T3:U1885"><span class="var type1" id="S47T3U2355">numOfFpp</span> * <span class="mxinfo " id="T3:U1887">2</span></span></span> + <span class="var type1" id="S51T3U2357">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1889">cos(<span class="mxinfo " id="T3:U1890">polyval(<span class="var type1" id="S16T10U2362">Rangle_Fangle</span>,<span class="mxinfo " id="T3:U1892">abs(<span class="mxinfo " id="T3:U1893"><span class="mxinfo " id="T25:U1894"><span class="var type1" id="S2T4U2367">thruster_data</span>(<span class="var type1" id="S30T3U2368">j</span>)</span>.phi</span>)</span>)</span>)</span></span>;<span class="comment">%(3.16a)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,316" id="srcline316">316</a></span><span class="line">                    <span class="mxinfo " id="T3:U1897"><span class="mxinfo " id="T3:U1898"><span class="var type1" id="S7T1U2373">b</span>(<span class="mxinfo " id="T3:U1900"><span class="var type1" id="S48T3U2375">pos_A</span> + <span class="mxinfo " id="T3:U1902">2</span></span>)</span> = <span class="mxinfo " id="T3:U1903"><span class="mxinfo " id="T25:U1904"><span class="var type1" id="S2T4U2379">thruster_data</span>(<span class="var type1" id="S30T3U2380">j</span>)</span>.T_</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,317" id="srcline317">317</a></span><span class="line">                    </span></span>
<span class="srcline"><span class="lineno"><a href="81,318" id="srcline318">318</a></span><span class="line">                    <span class="mxinfo " id="T3:U1907"><span class="mxinfo " id="T3:U1908"><span class="var type1" id="S6T18U2385">A</span>(<span class="mxinfo " id="T3:U1910"><span class="var type1" id="S48T3U2387">pos_A</span> + <span class="mxinfo " id="T3:U1912">3</span></span>,<span class="mxinfo " id="T3:U1913"><span class="mxinfo " id="T3:U1914"><span class="mxinfo " id="T3:U1915"><span class="mxinfo " id="T3:U1916"><span class="var type1" id="S46T3U2393">numOfAzi</span> * <span class="mxinfo " id="T3:U1918">2</span></span> + <span class="mxinfo " id="T3:U1919"><span class="var type1" id="S45T3U2396">numOfTunnel</span> * <span class="mxinfo " id="T3:U1921">2</span></span></span> + <span class="mxinfo " id="T3:U1922"><span class="var type1" id="S47T3U2399">numOfFpp</span> * <span class="mxinfo " id="T3:U1924">2</span></span></span> + <span class="var type1" id="S51T3U2401">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1926">-<span class="mxinfo " id="T3:U1927">cos(<span class="mxinfo " id="T3:U1928"><span class="mxinfo " id="T25:U1929"><span class="var type1" id="S2T4U2407">thruster_data</span>(<span class="var type1" id="S30T3U2408">j</span>)</span>.phi_</span>)</span></span></span>;<span class="comment">%(3.16b)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,319" id="srcline319">319</a></span><span class="line">                    <span class="mxinfo " id="T3:U1932"><span class="mxinfo " id="T3:U1933"><span class="var type1" id="S7T1U2413">b</span>(<span class="mxinfo " id="T3:U1935"><span class="var type1" id="S48T3U2415">pos_A</span> + <span class="mxinfo " id="T3:U1937">3</span></span>)</span> = <span class="mxinfo " id="T3:U1938"><span class="mxinfo " id="T3:U1939">-<span class="mxinfo " id="T3:U1940">cos(<span class="mxinfo " id="T3:U1941"><span class="mxinfo " id="T3:U1942"><span class="mxinfo " id="T25:U1943"><span class="var type1" id="S2T4U2424">thruster_data</span>(<span class="var type1" id="S30T3U2425">j</span>)</span>.phi_</span> - <span class="mxinfo " id="T3:U1946"><span class="mxinfo " id="T3:U1947">sign(<span class="mxinfo " id="T3:U1948"><span class="mxinfo " id="T25:U1949"><span class="var type1" id="S2T4U2432">thruster_data</span>(<span class="var type1" id="S30T3U2433">j</span>)</span>.phi</span>)</span><span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,320" id="srcline320">320</a></span><span class="line">                        * <span class="mxinfo " id="T3:U1952">polyval(<span class="var type1" id="S16T10U2437">Rangle_Fangle</span>,<span class="mxinfo " id="T3:U1954">abs(<span class="mxinfo " id="T3:U1955"><span class="mxinfo " id="T25:U1956"><span class="var type1" id="S2T4U2442">thruster_data</span>(<span class="var type1" id="S30T3U2443">j</span>)</span>.phi</span>)</span>)</span></span></span>)</span></span> * <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,321" id="srcline321">321</a></span><span class="line">                        <span class="mxinfo " id="T3:U1959"><span class="mxinfo " id="T25:U1960"><span class="var type1" id="S2T4U2447">thruster_data</span>(<span class="var type1" id="S30T3U2448">j</span>)</span>.Tplus</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,322" id="srcline322">322</a></span><span class="line">                    </span></span>
<span class="srcline"><span class="lineno"><a href="81,323" id="srcline323">323</a></span><span class="line">                    <span class="mxinfo " id="T3:U1963"><span class="mxinfo " id="T3:U1964"><span class="var type1" id="S6T18U2453">A</span>(<span class="mxinfo " id="T3:U1966"><span class="var type1" id="S48T3U2455">pos_A</span> + <span class="mxinfo " id="T3:U1968">4</span></span>,<span class="mxinfo " id="T3:U1969"><span class="mxinfo " id="T3:U1970"><span class="mxinfo " id="T3:U1971"><span class="mxinfo " id="T3:U1972"><span class="var type1" id="S46T3U2461">numOfAzi</span> * <span class="mxinfo " id="T3:U1974">2</span></span> + <span class="mxinfo " id="T3:U1975"><span class="var type1" id="S45T3U2464">numOfTunnel</span> * <span class="mxinfo " id="T3:U1977">2</span></span></span> + <span class="mxinfo " id="T3:U1978"><span class="var type1" id="S47T3U2467">numOfFpp</span> * <span class="mxinfo " id="T3:U1980">2</span></span></span> + <span class="var type1" id="S51T3U2469">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U1982">-<span class="mxinfo " id="T3:U1983">cos(<span class="mxinfo " id="T3:U1984"><span class="mxinfo " id="T25:U1985"><span class="var type1" id="S2T4U2475">thruster_data</span>(<span class="var type1" id="S30T3U2476">j</span>)</span>.phiPlus</span>)</span></span></span>;<span class="comment">%(3.16c)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,324" id="srcline324">324</a></span><span class="line">                    <span class="mxinfo " id="T3:U1988"><span class="mxinfo " id="T3:U1989"><span class="var type1" id="S7T1U2481">b</span>(<span class="mxinfo " id="T3:U1991"><span class="var type1" id="S48T3U2483">pos_A</span> + <span class="mxinfo " id="T3:U1993">4</span></span>)</span> = <span class="mxinfo " id="T3:U1994"><span class="mxinfo " id="T3:U1995">-<span class="mxinfo " id="T3:U1996">cos(<span class="mxinfo " id="T3:U1997"><span class="mxinfo " id="T3:U1998"><span class="mxinfo " id="T25:U1999"><span class="var type1" id="S2T4U2492">thruster_data</span>(<span class="var type1" id="S30T3U2493">j</span>)</span>.phiPlus</span> - <span class="mxinfo " id="T3:U2002"><span class="mxinfo " id="T3:U2003">sign(<span class="mxinfo " id="T3:U2004"><span class="mxinfo " id="T25:U2005"><span class="var type1" id="S2T4U2500">thruster_data</span>(<span class="var type1" id="S30T3U2501">j</span>)</span>.phi</span>)</span><span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,325" id="srcline325">325</a></span><span class="line">                        * <span class="mxinfo " id="T3:U2008">polyval(<span class="var type1" id="S16T10U2505">Rangle_Fangle</span>,<span class="mxinfo " id="T3:U2010">abs(<span class="mxinfo " id="T3:U2011"><span class="mxinfo " id="T25:U2012"><span class="var type1" id="S2T4U2510">thruster_data</span>(<span class="var type1" id="S30T3U2511">j</span>)</span>.phi</span>)</span>)</span></span></span>)</span></span> * <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,326" id="srcline326">326</a></span><span class="line">                        <span class="mxinfo " id="T3:U2015"><span class="mxinfo " id="T25:U2016"><span class="var type1" id="S2T4U2515">thruster_data</span>(<span class="var type1" id="S30T3U2516">j</span>)</span>.Tplus</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,327" id="srcline327">327</a></span><span class="line">                    </span></span>
<span class="srcline"><span class="lineno"><a href="81,328" id="srcline328">328</a></span><span class="line">                    <span class="keyword">for</span> <span class="var type1" id="S57T3U2520">i_Fpp</span> = <span class="mxinfo " id="T85:U2020"><span class="mxinfo " id="T3:U2021">1</span>:<span class="var type1" id="S13T3U2523">NA_fpp</span></span><span class="comment">%linearized thrust zone</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,329" id="srcline329">329</a></span><span class="line">                        <span class="mxinfo " id="T3:U2023"><span class="mxinfo " id="T3:U2024"><span class="var type1" id="S6T18U2527">A</span>(<span class="mxinfo " id="T3:U2026"><span class="mxinfo " id="T3:U2027"><span class="var type1" id="S48T3U2530">pos_A</span> + <span class="mxinfo " id="T3:U2029">4</span></span> + <span class="var type1" id="S57T3U2532">i_Fpp</span></span>,<span class="mxinfo " id="T3:U2031"><span class="mxinfo " id="T3:U2032"><span class="mxinfo " id="T3:U2033"><span class="mxinfo " id="T3:U2034"><span class="var type1" id="S46T3U2537">numOfAzi</span> * <span class="mxinfo " id="T3:U2036">2</span></span> + <span class="mxinfo " id="T3:U2037"><span class="var type1" id="S45T3U2540">numOfTunnel</span> * <span class="mxinfo " id="T3:U2039">2</span></span></span> + <span class="mxinfo " id="T3:U2040"><span class="var type1" id="S47T3U2543">numOfFpp</span> * <span class="mxinfo " id="T3:U2042">2</span></span></span> + <span class="var type1" id="S51T3U2545">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U2044"><span class="var type1" id="S54T84U2547">A_fpp</span>(<span class="var type1" id="S57T3U2548">i_Fpp</span>,<span class="var type1" id="S51T3U2549">ixy</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,330" id="srcline330">330</a></span><span class="line">                        <span class="mxinfo " id="T3:U2048"><span class="mxinfo " id="T3:U2049"><span class="var type1" id="S7T1U2553">b</span>(<span class="mxinfo " id="T3:U2051"><span class="mxinfo " id="T3:U2052"><span class="var type1" id="S48T3U2556">pos_A</span> + <span class="mxinfo " id="T3:U2054">4</span></span> + <span class="var type1" id="S57T3U2558">i_Fpp</span></span>)</span> = <span class="mxinfo " id="T3:U2056"><span class="var type1" id="S55T85U2560">b_fpp</span>(<span class="var type1" id="S57T3U2561">i_Fpp</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,331" id="srcline331">331</a></span><span class="line">                    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,332" id="srcline332">332</a></span><span class="line">                <span class="keyword">elseif</span> <span class="mxinfo " id="T11:U2059"><span class="var type1" id="S51T3U2564">ixy</span> == <span class="mxinfo " id="T3:U2061">2</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,333" id="srcline333">333</a></span><span class="line">                    <span class="mxinfo " id="T3:U2062"><span class="mxinfo " id="T3:U2063"><span class="var type1" id="S6T18U2569">A</span>(<span class="var type1" id="S48T3U2570">pos_A</span>,<span class="mxinfo " id="T3:U2066"><span class="mxinfo " id="T3:U2067"><span class="mxinfo " id="T3:U2068"><span class="mxinfo " id="T3:U2069"><span class="var type1" id="S46T3U2575">numOfAzi</span> * <span class="mxinfo " id="T3:U2071">2</span></span> + <span class="mxinfo " id="T3:U2072"><span class="var type1" id="S45T3U2578">numOfTunnel</span> * <span class="mxinfo " id="T3:U2074">2</span></span></span> + <span class="mxinfo " id="T3:U2075"><span class="var type1" id="S47T3U2581">numOfFpp</span> * <span class="mxinfo " id="T3:U2077">2</span></span></span> + <span class="var type1" id="S51T3U2583">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U2079">cos(<span class="mxinfo " id="T3:U2080"><span class="mxinfo " id="T25:U2081"><span class="var type1" id="S2T4U2588">thruster_data</span>(<span class="var type1" id="S30T3U2589">j</span>)</span>.phi_</span>)</span></span>;<span class="comment">%(3.15a)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,334" id="srcline334">334</a></span><span class="line">                    </span></span>
<span class="srcline"><span class="lineno"><a href="81,335" id="srcline335">335</a></span><span class="line">                    <span class="mxinfo " id="T3:U2084"><span class="mxinfo " id="T3:U2085"><span class="var type1" id="S6T18U2594">A</span>(<span class="mxinfo " id="T3:U2087"><span class="var type1" id="S48T3U2596">pos_A</span> + <span class="mxinfo " id="T3:U2089">1</span></span>,<span class="mxinfo " id="T3:U2090"><span class="mxinfo " id="T3:U2091"><span class="mxinfo " id="T3:U2092"><span class="mxinfo " id="T3:U2093"><span class="var type1" id="S46T3U2602">numOfAzi</span> * <span class="mxinfo " id="T3:U2095">2</span></span> + <span class="mxinfo " id="T3:U2096"><span class="var type1" id="S45T3U2605">numOfTunnel</span> * <span class="mxinfo " id="T3:U2098">2</span></span></span> + <span class="mxinfo " id="T3:U2099"><span class="var type1" id="S47T3U2608">numOfFpp</span> * <span class="mxinfo " id="T3:U2101">2</span></span></span> + <span class="var type1" id="S51T3U2610">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U2103">-<span class="mxinfo " id="T3:U2104">cos(<span class="mxinfo " id="T3:U2105"><span class="mxinfo " id="T25:U2106"><span class="var type1" id="S2T4U2616">thruster_data</span>(<span class="var type1" id="S30T3U2617">j</span>)</span>.phiPlus</span>)</span></span></span>;<span class="comment">%(3.15b)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,336" id="srcline336">336</a></span><span class="line">                    </span></span>
<span class="srcline"><span class="lineno"><a href="81,337" id="srcline337">337</a></span><span class="line">                    <span class="mxinfo " id="T3:U2109"><span class="mxinfo " id="T3:U2110"><span class="var type1" id="S6T18U2622">A</span>(<span class="mxinfo " id="T3:U2112"><span class="var type1" id="S48T3U2624">pos_A</span> + <span class="mxinfo " id="T3:U2114">2</span></span>,<span class="mxinfo " id="T3:U2115"><span class="mxinfo " id="T3:U2116"><span class="mxinfo " id="T3:U2117"><span class="mxinfo " id="T3:U2118"><span class="var type1" id="S46T3U2630">numOfAzi</span> * <span class="mxinfo " id="T3:U2120">2</span></span> + <span class="mxinfo " id="T3:U2121"><span class="var type1" id="S45T3U2633">numOfTunnel</span> * <span class="mxinfo " id="T3:U2123">2</span></span></span> + <span class="mxinfo " id="T3:U2124"><span class="var type1" id="S47T3U2636">numOfFpp</span> * <span class="mxinfo " id="T3:U2126">2</span></span></span> + <span class="var type1" id="S51T3U2638">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U2128">sin(<span class="mxinfo " id="T3:U2129"><span class="mxinfo " id="T3:U2130">sign(<span class="mxinfo " id="T3:U2131"><span class="mxinfo " id="T25:U2132"><span class="var type1" id="S2T4U2646">thruster_data</span>(<span class="var type1" id="S30T3U2647">j</span>)</span>.phi</span>)</span><span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,338" id="srcline338">338</a></span><span class="line">                        * <span class="mxinfo " id="T3:U2135">polyval(<span class="var type1" id="S16T10U2651">Rangle_Fangle</span>,<span class="mxinfo " id="T3:U2137">abs(<span class="mxinfo " id="T3:U2138"><span class="mxinfo " id="T25:U2139"><span class="var type1" id="S2T4U2656">thruster_data</span>(<span class="var type1" id="S30T3U2657">j</span>)</span>.phi</span>)</span>)</span></span>)</span></span>;<span class="comment">%(3.16a)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,339" id="srcline339">339</a></span><span class="line">                    </span></span>
<span class="srcline"><span class="lineno"><a href="81,340" id="srcline340">340</a></span><span class="line">                    <span class="mxinfo " id="T3:U2142"><span class="mxinfo " id="T3:U2143"><span class="var type1" id="S6T18U2662">A</span>(<span class="mxinfo " id="T3:U2145"><span class="var type1" id="S48T3U2664">pos_A</span> + <span class="mxinfo " id="T3:U2147">3</span></span>,<span class="mxinfo " id="T3:U2148"><span class="mxinfo " id="T3:U2149"><span class="mxinfo " id="T3:U2150"><span class="mxinfo " id="T3:U2151"><span class="var type1" id="S46T3U2670">numOfAzi</span> * <span class="mxinfo " id="T3:U2153">2</span></span> + <span class="mxinfo " id="T3:U2154"><span class="var type1" id="S45T3U2673">numOfTunnel</span> * <span class="mxinfo " id="T3:U2156">2</span></span></span> + <span class="mxinfo " id="T3:U2157"><span class="var type1" id="S47T3U2676">numOfFpp</span> * <span class="mxinfo " id="T3:U2159">2</span></span></span> + <span class="var type1" id="S51T3U2678">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U2161">-<span class="mxinfo " id="T3:U2162">sin(<span class="mxinfo " id="T3:U2163"><span class="mxinfo " id="T25:U2164"><span class="var type1" id="S2T4U2684">thruster_data</span>(<span class="var type1" id="S30T3U2685">j</span>)</span>.phi_</span>)</span></span></span>;<span class="comment">%(3.16b)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,341" id="srcline341">341</a></span><span class="line">                    </span></span>
<span class="srcline"><span class="lineno"><a href="81,342" id="srcline342">342</a></span><span class="line">                    <span class="mxinfo " id="T3:U2167"><span class="mxinfo " id="T3:U2168"><span class="var type1" id="S6T18U2690">A</span>(<span class="mxinfo " id="T3:U2170"><span class="var type1" id="S48T3U2692">pos_A</span> + <span class="mxinfo " id="T3:U2172">4</span></span>,<span class="mxinfo " id="T3:U2173"><span class="mxinfo " id="T3:U2174"><span class="mxinfo " id="T3:U2175"><span class="mxinfo " id="T3:U2176"><span class="var type1" id="S46T3U2698">numOfAzi</span> * <span class="mxinfo " id="T3:U2178">2</span></span> + <span class="mxinfo " id="T3:U2179"><span class="var type1" id="S45T3U2701">numOfTunnel</span> * <span class="mxinfo " id="T3:U2181">2</span></span></span> + <span class="mxinfo " id="T3:U2182"><span class="var type1" id="S47T3U2704">numOfFpp</span> * <span class="mxinfo " id="T3:U2184">2</span></span></span> + <span class="var type1" id="S51T3U2706">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U2186">-<span class="mxinfo " id="T3:U2187">sin(<span class="mxinfo " id="T3:U2188"><span class="mxinfo " id="T25:U2189"><span class="var type1" id="S2T4U2712">thruster_data</span>(<span class="var type1" id="S30T3U2713">j</span>)</span>.phiPlus</span>)</span></span></span>;<span class="comment">%(3.16c)</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,343" id="srcline343">343</a></span><span class="line">                    </span></span>
<span class="srcline"><span class="lineno"><a href="81,344" id="srcline344">344</a></span><span class="line">                    <span class="keyword">for</span> <span class="var type1" id="S57T3U2717">i_Fpp</span> = <span class="mxinfo " id="T85:U2193"><span class="mxinfo " id="T3:U2194">1</span>:<span class="var type1" id="S13T3U2720">NA_fpp</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,345" id="srcline345">345</a></span><span class="line">                        <span class="mxinfo " id="T3:U2196"><span class="mxinfo " id="T3:U2197"><span class="var type1" id="S6T18U2724">A</span>(<span class="mxinfo " id="T3:U2199"><span class="mxinfo " id="T3:U2200"><span class="var type1" id="S48T3U2727">pos_A</span> + <span class="mxinfo " id="T3:U2202">4</span></span> + <span class="var type1" id="S57T3U2729">i_Fpp</span></span>,<span class="mxinfo " id="T3:U2204"><span class="mxinfo " id="T3:U2205"><span class="mxinfo " id="T3:U2206"><span class="mxinfo " id="T3:U2207"><span class="var type1" id="S46T3U2734">numOfAzi</span> * <span class="mxinfo " id="T3:U2209">2</span></span> + <span class="mxinfo " id="T3:U2210"><span class="var type1" id="S45T3U2737">numOfTunnel</span> * <span class="mxinfo " id="T3:U2212">2</span></span></span> + <span class="mxinfo " id="T3:U2213"><span class="var type1" id="S47T3U2740">numOfFpp</span> * <span class="mxinfo " id="T3:U2215">2</span></span></span> + <span class="var type1" id="S51T3U2742">ixy</span></span>)</span> = <span class="mxinfo " id="T3:U2217"><span class="var type1" id="S54T84U2744">A_fpp</span>(<span class="var type1" id="S57T3U2745">i_Fpp</span>,<span class="var type1" id="S51T3U2746">ixy</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,346" id="srcline346">346</a></span><span class="line">                    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,347" id="srcline347">347</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,348" id="srcline348">348</a></span><span class="line">                </span></span>
<span class="srcline"><span class="lineno"><a href="81,349" id="srcline349">349</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,350" id="srcline350">350</a></span><span class="line">            <span class="comment">%         check_rudder_constr(thruster_data(j).Tmax*[-1 -1;-1 1;1 1;1 -1],A(pos_A:pos_A + 4, <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,351" id="srcline351">351</a></span><span class="line">            <span class="comment">%             numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 1:numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 2), <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,352" id="srcline352">352</a></span><span class="line">            <span class="comment">%             b(pos_A:pos_A + 4));%fpp</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,353" id="srcline353">353</a></span><span class="line">            <span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,354" id="srcline354">354</a></span><span class="line">            <span class="comment">%         check_rudder_constr(thruster_data(j).Tmax*[-1 -1;-1 1;1 1;1 -1],A(pos_A + 4 + 1:pos_A + 4 + i_Fpp, <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,355" id="srcline355">355</a></span><span class="line">            <span class="comment">%             numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 1:numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 2), <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,356" id="srcline356">356</a></span><span class="line">            <span class="comment">%             b(pos_A + 4 + 1:pos_A + 4 + i_Fpp));</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,357" id="srcline357">357</a></span><span class="line">            <span class="comment">%             check_rudder_constr(thruster_data(j).Tmax*[-1 -1;-1 1;1 1;1 -1],A(pos_A:pos_A + 4 + i_Fpp, <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,358" id="srcline358">358</a></span><span class="line">            <span class="comment">%                 numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 1:numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 2), <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="81,359" id="srcline359">359</a></span><span class="line">            <span class="comment">%                 b(pos_A:pos_A + 4 + i_Fpp));</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,360" id="srcline360">360</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,361" id="srcline361">361</a></span><span class="line">            <span class="mxinfo " id="T3:U2221"><span class="var type1" id="S48T3U2749">pos_A</span> = <span class="mxinfo " id="T3:U2223"><span class="mxinfo " id="T3:U2224"><span class="var type1" id="S48T3U2752">pos_A</span> + <span class="mxinfo " id="T3:U2226">5</span></span> + <span class="var type1" id="S13T3U2754">NA_fpp</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,362" id="srcline362">362</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="81,363" id="srcline363">363</a></span><span class="line">            <span class="mxinfo " id="T3:U2228"><span class="var type1" id="S47T3U2757">numOfFpp</span> = <span class="mxinfo " id="T3:U2230"><span class="var type1" id="S47T3U2759">numOfFpp</span> + <span class="mxinfo " id="T3:U2232">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="81,364" id="srcline364">364</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,365" id="srcline365">365</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,366" id="srcline366">366</a></span><span class="line"><span class="comment">%!!-----------------add bound for s1 s2 s3---does not help------------</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,367" id="srcline367">367</a></span><span class="line"><span class="comment">% A(end + 1,numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 1) = 1;</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,368" id="srcline368">368</a></span><span class="line"><span class="comment">% A(end + 1,numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 1) = 1;</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,369" id="srcline369">369</a></span><span class="line"><span class="comment">% A(end + 1,numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 1) = 1;</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,370" id="srcline370">370</a></span><span class="line"><span class="comment">% A(end + 1,numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 1) = -1;</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,371" id="srcline371">371</a></span><span class="line"><span class="comment">% A(end + 1,numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 1) = -1;</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,372" id="srcline372">372</a></span><span class="line"><span class="comment">% A(end + 1,numOfAzi * 2 + numOfTunnel * 2 + numOfFpp * 2 + 1) = -1;</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,373" id="srcline373">373</a></span><span class="line"><span class="comment">% b(end + 1) = -1000000;</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,374" id="srcline374">374</a></span><span class="line"><span class="comment">% b(end + 1) = -1000000;</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,375" id="srcline375">375</a></span><span class="line"><span class="comment">% b(end + 1) = -1000000;</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,376" id="srcline376">376</a></span><span class="line"><span class="comment">% b(end + 1) = 1000000;</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,377" id="srcline377">377</a></span><span class="line"><span class="comment">% b(end + 1) = 1000000;</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,378" id="srcline378">378</a></span><span class="line"><span class="comment">% b(end + 1) = 1000000;</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,379" id="srcline379">379</a></span><span class="line"><span class="comment">%-------------------------------------------------</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,380" id="srcline380">380</a></span><span class="line"><span class="mxinfo " id="T3:U2233"><span class="mxinfo " id="T3:U2234"><span class="var type1" id="S8T18U2764">Aeq</span>(<span class="mxinfo " id="T3:U2236">1</span>,<span class="mxinfo " id="T3:U2237"><span class="mxinfo " id="T3:U2238"><span class="mxinfo " id="T3:U2239"><span class="mxinfo " id="T3:U2240"><span class="var type1" id="S46T3U2770">numOfAzi</span> * <span class="mxinfo " id="T3:U2242">2</span></span> + <span class="mxinfo " id="T3:U2243"><span class="var type1" id="S45T3U2773">numOfTunnel</span> * <span class="mxinfo " id="T3:U2245">2</span></span></span> + <span class="mxinfo " id="T3:U2246"><span class="var type1" id="S47T3U2776">numOfFpp</span> * <span class="mxinfo " id="T3:U2248">2</span></span></span> + <span class="mxinfo " id="T3:U2249">1</span></span>)</span> = <span class="mxinfo " id="T3:U2250">-<span class="mxinfo " id="T3:U2251">1</span></span></span>;<span class="comment">%s1</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,381" id="srcline381">381</a></span><span class="line"><span class="mxinfo " id="T3:U2252"><span class="mxinfo " id="T3:U2253"><span class="var type1" id="S8T18U2784">Aeq</span>(<span class="mxinfo " id="T3:U2255">2</span>,<span class="mxinfo " id="T3:U2256"><span class="mxinfo " id="T3:U2257"><span class="mxinfo " id="T3:U2258"><span class="mxinfo " id="T3:U2259"><span class="var type1" id="S46T3U2790">numOfAzi</span> * <span class="mxinfo " id="T3:U2261">2</span></span> + <span class="mxinfo " id="T3:U2262"><span class="var type1" id="S45T3U2793">numOfTunnel</span> * <span class="mxinfo " id="T3:U2264">2</span></span></span> + <span class="mxinfo " id="T3:U2265"><span class="var type1" id="S47T3U2796">numOfFpp</span> * <span class="mxinfo " id="T3:U2267">2</span></span></span> + <span class="mxinfo " id="T3:U2268">2</span></span>)</span> = <span class="mxinfo " id="T3:U2269">-<span class="mxinfo " id="T3:U2270">1</span></span></span>;<span class="comment">%s2</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,382" id="srcline382">382</a></span><span class="line"><span class="mxinfo " id="T3:U2271"><span class="mxinfo " id="T3:U2272"><span class="var type1" id="S8T18U2804">Aeq</span>(<span class="mxinfo " id="T3:U2274">3</span>,<span class="mxinfo " id="T3:U2275"><span class="mxinfo " id="T3:U2276"><span class="mxinfo " id="T3:U2277"><span class="mxinfo " id="T3:U2278"><span class="var type1" id="S46T3U2810">numOfAzi</span> * <span class="mxinfo " id="T3:U2280">2</span></span> + <span class="mxinfo " id="T3:U2281"><span class="var type1" id="S45T3U2813">numOfTunnel</span> * <span class="mxinfo " id="T3:U2283">2</span></span></span> + <span class="mxinfo " id="T3:U2284"><span class="var type1" id="S47T3U2816">numOfFpp</span> * <span class="mxinfo " id="T3:U2286">2</span></span></span> + <span class="mxinfo " id="T3:U2287">3</span></span>)</span> = <span class="mxinfo " id="T3:U2288">-<span class="mxinfo " id="T3:U2289">1</span></span></span>;<span class="comment">%s3</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,383" id="srcline383">383</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,384" id="srcline384">384</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S50T3U2823">i</span> = <span class="mxinfo " id="T6:U2291"><span class="mxinfo " id="T3:U2292">1</span>:3</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,385" id="srcline385">385</a></span><span class="line">    <span class="mxinfo " id="T3:U2293"><span class="mxinfo " id="T3:U2294"><span class="var type1" id="S4T18U2830">H</span>(<span class="mxinfo " id="T3:U2296"><span class="mxinfo " id="T3:U2297"><span class="var type1" id="S44T3U2833">i_H</span> + <span class="var type1" id="S50T3U2834">i</span></span> - <span class="mxinfo " id="T3:U2300">1</span></span>,<span class="mxinfo " id="T3:U2301"><span class="mxinfo " id="T3:U2302"><span class="var type1" id="S44T3U2838">i_H</span> + <span class="var type1" id="S50T3U2839">i</span></span> - <span class="mxinfo " id="T3:U2305">1</span></span>)</span> = <span class="mxinfo " id="T3:U2306"><span class="mxinfo " id="T6:U2307"><span class="mxinfo " id="T25:U2308"><span class="var type1" id="S2T4U2844">thruster_data</span>(<span class="mxinfo " id="T3:U2310">1</span>)</span>.weight_s</span>(<span class="var type1" id="S50T3U2847">i</span>)</span></span>;<span class="comment">%!!!thruster_data(1) must be available</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,386" id="srcline386">386</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,387" id="srcline387">387</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="81,388" id="srcline388">388</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="81,389" id="srcline389">389</a></span><span class="line"></span></span>
</pre>
